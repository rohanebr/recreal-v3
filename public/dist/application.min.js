"use strict";var ApplicationConfiguration=function(){var applicationModuleName="recreal",applicationModuleVendorDependencies=["ngResource","ui.router","ui.bootstrap","ui.utils","ui.date","angularFileUpload","textAngular","timer","angularCharts","geolocation","ui.sortable","toaster","ngMap"],registerModule=function(moduleName){angular.module(moduleName,[]),angular.module(applicationModuleName).requires.push(moduleName)};return{applicationModuleName:applicationModuleName,applicationModuleVendorDependencies:applicationModuleVendorDependencies,registerModule:registerModule}}();angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("!")}]),angular.element(document).ready(function(){"#_=_"===window.location.hash&&(window.location.hash="#!"),angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}),ApplicationConfiguration.registerModule("candidate-features"),ApplicationConfiguration.registerModule("candidate-jobs"),ApplicationConfiguration.registerModule("candidate-signup-wizard"),ApplicationConfiguration.registerModule("candidates"),ApplicationConfiguration.registerModule("companies"),ApplicationConfiguration.registerModule("core"),ApplicationConfiguration.registerModule("employer-company"),ApplicationConfiguration.registerModule("employer-signup-wizard"),ApplicationConfiguration.registerModule("employers"),ApplicationConfiguration.registerModule("empoyer-jobs"),ApplicationConfiguration.registerModule("exams"),ApplicationConfiguration.registerModule("jobs"),ApplicationConfiguration.registerModule("messages"),ApplicationConfiguration.registerModule("short-list"),ApplicationConfiguration.registerModule("static-factories"),ApplicationConfiguration.registerModule("threads"),ApplicationConfiguration.registerModule("users"),angular.module("candidate-features").config(["$stateProvider",function($stateProvider){$stateProvider.state("linkedin-cv",{url:"/linkedin-cv",templateUrl:"modules/candidate-features/views/linkedin-cv.client.view.html"}).state("edit-cv",{url:"/edit-cv",templateUrl:"modules/candidate-features/views/edit-cv.client.view.html"}).state("candidate-home",{url:"/candidate-home",templateUrl:"modules/candidate-features/views/candidate-home.client.view.html"}).state("candidate-cv",{url:"/candidate-cv",templateUrl:"modules/candidate-features/views/candidate-cv.client.view.html"})}]),angular.module("candidate-features").controller("CandidateCvController",["$scope","Industries","Countries","$http","Authentication","Candidates","$location","$modal",function($scope,Industries,Countries,$http,Authentication,Candidates,$location,$modal){$scope.user=Authentication.user,$scope.isEditing=!1,$scope.industries=Industries.getIndustries(),Countries.getCountries(function(countries){$scope.countries=countries}),$scope.user||$location.path("/signin"),$scope.candidate=Candidates.get({candidateId:$scope.user.candidate},function(candidate){candidate.skills||($scope.candidate.skills=[{title:""}]),candidate.educations||($scope.candidate.educations=[{degree:""}]),candidate.target_industries.length<1&&($scope.candidate.target_industries=[{name:""}]),candidate.target_locations.length<1&&($scope.candidate.target_locations=[{name:""}])}),$scope.update=function(){var candidate=$scope.candidate;candidate.$update(function(){$location.path("candidates/"+candidate._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.addSkill=function(){$scope.candidate.skills.push({title:""})},$scope.removeSkill=function(index){$scope.candidate.skills.splice(index,1)},$scope.addEducation=function(){$scope.candidate.educations.push({title:""})},$scope.removeEducation=function(index){$scope.candidate.educations.splice(index,1)},$scope.addExperience=function(){$scope.candidate.positions.push({title:""})},$scope.removeExperience=function(index){$scope.candidate.positions.splice(index,1)},$scope.addProject=function(){$scope.candidate.projects.push({title:""})},$scope.removeProject=function(index){$scope.candidate.projects.splice(index,1)},$scope.addLanguage=function(){$scope.candidate.languages.push({title:""})},$scope.removeLanguage=function(index){$scope.candidate.languages.splice(index,1)},$scope.newProject={name:"",company:"",description:""},$scope.openProjectModal=function(project){var modalInstance;modalInstance=$modal.open({templateUrl:"/modules/candidate-features/views/cv-partials/project-partial.html",controller:"ProjectModalCtrl",resolve:{project:function(){return angular.copy(project)}}}),modalInstance.result.then(function(result){var project=result.project;"delete"===result.action?angular.forEach($scope.candidate.projects,function(cProject){cProject._id===project._id&&($scope.candidate.projects.splice($scope.candidate.projects.indexOf(cProject),1),$http.put("/candidates/deleteProject/"+$scope.candidate._id,cProject).success(function(){}).error(function(response){$scope.error=response.message}))}):(project.name=project.name.trim(),void 0!==project._id?angular.forEach($scope.candidate.projects,function(cProject){cProject._id===project._id&&(cProject.name=project.name,cProject.company=project.company,cProject.description=project.description,cProject.start_date=project.start_date,cProject.end_date=project.end_date,$http.put("/candidates/updateProject/"+$scope.candidate._id,cProject).success(function(){}).error(function(response){$scope.error=response.message}))}):($scope.candidate.projects.push(project),$http.put("/candidates/addProject/"+$scope.candidate._id,project).success(function(){$scope.newProject={name:"",company:"",description:""}}).error(function(response){$scope.error=response.message})))},function(){})},$scope.newCertificate={name:""},$scope.openCertificateModal=function(certificate){var modalInstance;modalInstance=$modal.open({templateUrl:"/modules/candidate-features/views/cv-partials/certificates-partial.html",controller:"CertificateModalCtrl",resolve:{certificate:function(){return angular.copy(certificate)}}}),modalInstance.result.then(function(result){var certificate=result.certificate;"delete"===result.action?angular.forEach($scope.candidate.certificates,function(cCertificate){cCertificate._id===certificate._id&&($scope.candidate.certificates.splice($scope.candidate.certificates.indexOf(cCertificate),1),$http.put("/candidates/deleteCertificate/"+$scope.candidate._id,cCertificate).success(function(){}).error(function(response){$scope.error=response.message}))}):(certificate.name=certificate.name.trim(),void 0!==certificate._id?angular.forEach($scope.candidate.certificates,function(cCertificate){cCertificate._id===certificate._id&&(cCertificate.name=certificate.name,$http.put("/candidates/updateCertificate/"+$scope.candidate._id,cCertificate).success(function(){}).error(function(response){$scope.error=response.message}))}):($scope.candidate.certificates.push(certificate),$http.put("/candidates/addCertificate/"+$scope.candidate._id,certificate).success(function(){$scope.newCertificate={name:""}}).error(function(response){$scope.error=response.message})))},function(){})},$scope.newLanguage={name:"",proficiency:""},$scope.openLanguageModal=function(language){var modalInstance;modalInstance=$modal.open({templateUrl:"/modules/candidate-features/views/cv-partials/language-partial.html",controller:"LanguageModalCtrl",resolve:{language:function(){return angular.copy(language)}}}),modalInstance.result.then(function(result){var language=result.language;"delete"===result.action?angular.forEach($scope.candidate.languages,function(cLanguages){cLanguages._id===language._id&&($scope.candidate.languages.splice($scope.candidate.languages.indexOf(cLanguages),1),$http.put("/candidates/deleteLanguage/"+$scope.candidate._id,cLanguages).success(function(){}).error(function(response){$scope.error=response.message}))}):(language.name=language.name.trim(),void 0!==language._id?angular.forEach($scope.candidate.languages,function(cLanguages){cLanguages._id===language._id&&(cLanguages.name=language.name,cLanguages.proficiency=language.proficiency,$http.put("/candidates/updateLanguage/"+$scope.candidate._id,cLanguages).success(function(){}).error(function(response){$scope.error=response.message}))}):($scope.candidate.languages.push(language),$http.put("/candidates/addLanguage/"+$scope.candidate._id,language).success(function(){$scope.newLanguage={name:"",proficiency:""}}).error(function(response){$scope.error=response.message})))},function(){})},$scope.newEducation={degree:"",study_feild:"",institute:"",notes:""},$scope.openEducationModal=function(education){var modalInstance;modalInstance=$modal.open({templateUrl:"/modules/candidate-features/views/cv-partials/education-partial.html",controller:"EducationModalCtrl",resolve:{education:function(){return angular.copy(education)}}}),modalInstance.result.then(function(result){var education=result.education;"delete"===result.action?angular.forEach($scope.candidate.educations,function(cEducation){cEducation._id===education._id&&($scope.candidate.educations.splice($scope.candidate.educations.indexOf(cEducation),1),$http.put("/candidates/deleteEducation/"+$scope.candidate._id,cEducation).success(function(){}).error(function(response){$scope.error=response.message}))}):(education.degree=education.degree.trim(),void 0!==education._id?angular.forEach($scope.candidate.educations,function(cEducation){cEducation._id===education._id&&(cEducation.degree=education.degree,cEducation.study_feild=education.study_feild,cEducation.institute=education.institute,cEducation.notes=education.notes,cEducation.start_date=education.start_date,cEducation.end_date=education.end_date,$http.put("/candidates/updateEducation/"+$scope.candidate._id,cEducation).success(function(){}).error(function(response){$scope.error=response.message}))}):($scope.candidate.educations.push(education),$http.put("/candidates/addEducation/"+$scope.candidate._id,education).success(function(){$scope.newEducation={degree:"",study_feild:"",institute:"",notes:""}}).error(function(response){$scope.error=response.message})))},function(){})},$scope.newSkill={title:"",experience:1,level:"Beginner"},$scope.openSkillModal=function(skill){console.log("OPENSKILLMODAL RUNNING");var modalInstance;modalInstance=$modal.open({templateUrl:"/modules/candidate-features/views/cv-partials/skill-partial.html",controller:"SkillModalCtrl",resolve:{skill:function(){return angular.copy(skill)}}}),modalInstance.result.then(function(result){var skill=result.skill;"delete"===result.action?angular.forEach($scope.candidate.skills,function(cSkill){cSkill._id===skill._id&&($http.put("/candidates/deleteSkill/"+$scope.candidate._id,cSkill).success(function(response){alert(response)}).error(function(response){$scope.error=response.message}),$scope.candidate.skills.splice($scope.candidate.skills.indexOf(cSkill),1))}):(skill.title=skill.title.trim(),void 0!==skill._id?angular.forEach($scope.candidate.skills,function(cSkill){cSkill._id===skill._id&&(cSkill.title=skill.title,cSkill.level=skill.level,cSkill.experience=skill.experience,cSkill.last_used=skill.last_used,$http.put("/candidates/updateSkill/"+$scope.candidate._id,cSkill).success(function(){}).error(function(response){$scope.error=response.message}))}):(console.log("addskill clicked"),$scope.candidate.skills.push(skill),$http.put("/candidates/addSkill/"+$scope.candidate._id,skill).success(function(){$scope.newSkill={title:"",experience:1,level:"Beginner"}}).error(function(response){$scope.error=response.message})))},function(){})},$scope.openCandidatePictureModal=function(){var modalInstance;modalInstance=$modal.open({templateUrl:"/modules/candidate-features/views/cv-partials/picture-partial.html",controller:"PictureModalCtrl"}),modalInstance.result.then(function(result){$scope.candidate.picture_url=result.picture_url},function(){})},$scope.newExperience={company_name:"",title:"",summary:"",company_location:"",company_industry:"",is_current:!1},$scope.openExperienceModal=function(position){var modalInstance;modalInstance=$modal.open({templateUrl:"/modules/candidate-features/views/cv-partials/experience-partial.html",controller:"ExperienceModalCtrl",resolve:{position:function(){return angular.copy(position)}}}),modalInstance.result.then(function(result){var position=result.position;"delete"===result.action?angular.forEach($scope.candidate.positions,function(cPosition){cPosition._id===position._id&&($scope.candidate.positions.splice($scope.candidate.positions.indexOf(cPosition),1),$http.put("/candidates/deleteExperience/"+$scope.candidate._id,cPosition).success(function(){}).error(function(response){$scope.error=response.message}))}):(position.company_name=position.company_name.trim(),void 0!==position._id?angular.forEach($scope.candidate.positions,function(cPosition){cPosition._id===position._id&&(cPosition.company_name=position.company_name,cPosition.company_industry=position.company_industry,cPosition.company_location=position.company_location,cPosition.start_date=position.start_date,cPosition.end_date=position.end_date,cPosition.is_current=position.is_current,cPosition.summary=position.summary,cPosition.title=position.title,$http.put("/candidates/updateExperience/"+$scope.candidate._id,cPosition).success(function(){}).error(function(response){$scope.error=response.message}))}):($scope.candidate.positions.push(position),$http.put("/candidates/addExperience/"+$scope.candidate._id,position).success(function(){$scope.newExperience={company_name:"",title:"",summary:"",company_location:"",company_industry:"",start_date:"0-0-0",end_date:"0-0-0",is_current:!1}}).error(function(response){$scope.error=response.message})))},function(){})}}]).controller("SkillModalCtrl",["$scope","$modalInstance","skill",function($scope,$modalInstance,skill){$scope.skill=skill,$scope.ok=function(action){$modalInstance.close({action:action,skill:$scope.skill})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]).controller("LanguageModalCtrl",["$scope","$modalInstance","language",function($scope,$modalInstance,language){$scope.language=language,$scope.ok=function(action){$modalInstance.close({action:action,language:$scope.language})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]).controller("CertificateModalCtrl",["$scope","$modalInstance","certificate",function($scope,$modalInstance,certificate){$scope.certificate=certificate,$scope.ok=function(action){$modalInstance.close({action:action,certificate:$scope.certificate})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]).controller("EducationModalCtrl",["$scope","$modalInstance","education",function($scope,$modalInstance,education){$scope.education=education,$scope.ok=function(action){$modalInstance.close({action:action,education:$scope.education})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]).controller("ProjectModalCtrl",["$scope","$modalInstance","project",function($scope,$modalInstance,project){$scope.project=project,$scope.ok=function(action){$modalInstance.close({action:action,project:$scope.project})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]).controller("ExperienceModalCtrl",["$scope","$modalInstance","position",function($scope,$modalInstance,position){$scope.position=position,$scope.ok=function(action){$modalInstance.close({action:action,position:$scope.position})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]),angular.module("candidate-features").controller("CandidateHomeController",["$scope","Jobs","$http","Authentication","Candidates","$location","Socket",function($scope,Jobs,$http,Authentication,Candidates,$location){$scope.user=Authentication.user,$scope.user||$location.path("/signin"),console.log($scope.user.candidate),$scope.candidate=Candidates.get({candidateId:$scope.user.candidate}),$scope.jobs=Jobs.query(),$scope.hasApplied=function(job){for(var d=0,x=$scope.candidate.jobs.length;x>d;d++)if($scope.candidate.jobs[d]===job._id)return!0;return!1},$scope.apply=function(job){$http.put("jobs/apply/"+job._id,job).success(function(){$scope.candidate.jobs.push(job),$scope.jobs.splice($scope.jobs.indexOf(job),1),$scope.$apply(),$location.path("jobs/"+job._id)}).error(function(response){$scope.error=response.message})}}]),angular.module("candidate-features").controller("LinkedinCvController",["$scope","$http","Authentication",function($scope,$http,Authentication){$scope.getLinkiedInProfile=function(){$scope.user=Authentication.user,$http.get("/users/linkedInProfile/"+$scope.user._id).success(function(res){$scope.candidate=new Object,$scope.candidate.displayName=res.firstName+" "+res.lastName,$scope.candidate.title=res.headline,$scope.candidate.country=res.locat.name,$scope.candidate.picture_url=res.pictureUrl,$scope.candidate.objective=res.summary}).error(function(){console.log("Shouldnt have happened")})}}]),angular.module("candidate-jobs").config(["$stateProvider",function($stateProvider){$stateProvider.state("candidate-applied-jobs",{url:"/candidate-applied-jobs",templateUrl:"modules/candidate-jobs/views/candidate-applied-jobs.client.view.html"}).state("candidate-open-jobs",{url:"/candidate-open-jobs",templateUrl:"modules/candidate-jobs/views/candidate-open-jobs.client.view.html"}).state("search-jobs",{url:"/search-jobs/:keyword",templateUrl:"modules/candidate-jobs/views/search-jobs.client.view.html"})}]),angular.module("candidate-jobs").controller("CandidateAppliedJobsController",["$scope","Jobs","$http","Authentication","Candidates","$location",function($scope,Jobs,$http,Authentication,Candidates,$location){$scope.user=Authentication.user,$scope.user||$location.path("/signin"),$scope.candidate=Candidates.get({candidateId:$scope.user.candidate}),$scope.jobs=Jobs.query(),$scope.hasApplied=function(job){return $scope.candidate.jobs.indexOf(job._id)>-1?!0:!1},$scope.apply=function(job){$http.put("jobs/apply/"+job._id,job).success(function(){$scope.candidate.jobs.push(job),$scope.jobs.splice($scope.jobs.indexOf(job),1),$scope.$apply(),$location.path("jobs/"+job._id)}).error(function(response){$scope.error=response.message})}}]),angular.module("candidate-jobs").controller("CandidateOpenJobsController",["$scope","Jobs","$http","Authentication","Candidates","$location","Socket","$rootScope",function($scope,Jobs,$http,Authentication,Candidates,$location,Socket,$rootScope){console.log($rootScope.coords.lat+","+$rootScope.coords.longi),$scope.itemsPerPage=10,$scope.currentPage=0,$scope.locationFilters=[],$scope.isPageChange=!1,$scope.skip=0,$scope.completefilternames=[],$scope.firsttime=!0,$scope.jobs=[],$scope.dummyfilters=[],$scope.user=Authentication.user,$scope.lat=0,$scope.longi=0,$scope.filters=[],$scope.filterLimit=5,$scope.longi=$rootScope.coords.longi,$scope.lat=$rootScope.coords.lat,$scope.user||$location.path("/signin");var map;$scope.dynMarkers=[],$scope.$on("mapInitialized",function(event,evtMap){map=evtMap;for(var i=0;1e3>i;i++){var latLng=new google.maps.LatLng(markers[i].position[0],markers[i].position[1]);$scope.dynMarkers.push(new google.maps.Marker({position:latLng}))}$scope.markerClusterer=new MarkerClusterer(map,$scope.dynMarkers,{})}),$scope.range=function(){var start,rangeSize=5,ret=[];start=$scope.currentPage,start>$scope.pageCount()-rangeSize&&(start=$scope.pageCount()-rangeSize);for(var i=start;start+rangeSize>i;i++)i>=0&&ret.push(i);return ret},$scope.prevPage=function(){$scope.currentPage>0&&$scope.currentPage--},$scope.prevPageDisabled=function(){return 0===$scope.currentPage?"disabled":""},$scope.nextPage=function(){$scope.currentPage<$scope.pageCount()-1&&$scope.currentPage++},$scope.nextPageDisabled=function(){return $scope.currentPage===$scope.pageCount()-1?"disabled":""},$scope.pageCount=function(){return Math.ceil($scope.total/$scope.itemsPerPage)},$scope.setPage=function(n){n>=0&&n<$scope.pageCount()&&($scope.currentPage=n)},$scope.candidate=Candidates.get({candidateId:$scope.user.candidate}),Socket.on("job_posted",function(data){console.log(data),$scope.jobs.push(data.job),console.log($rootScope.coords.lat+","+$rootScope.coords.longi)}),$scope.findJobs=function(skip,limit,filters,isPageChange){$http.put("jobs/getPaginatedJobs/"+$scope.user._id,{skip:skip,limit:limit,filter:filters,isPageChange:isPageChange}).success(function(job){$scope.filters1=[],$scope.jobs=job.jobs,console.log(job.jobs),$scope.total=job.total,$scope.candidates=job.candidates,job.filters.forEach(function(entry){$scope.filters1.push(entry)}),$scope.firsttime&&($scope.firsttime=!1,$scope.filters1.forEach(function(entry){for(var alreadyexists=!1,h=0,a=$scope.completefilternames.length;a>h;h++)$scope.completefilternames[h]==entry.type&&(alreadyexists=!0);alreadyexists||$scope.completefilternames.push(entry.type)}),console.log($scope.completefilternames))})},$scope.$watch("currentPage",function(newValue){$scope.skip=newValue*$scope.itemsPerPage,0==$scope.skip?$scope.findJobs($scope.skip,$scope.itemsPerPage,$scope.filters,!1):$scope.findJobs($scope.skip,$scope.itemsPerPage,$scope.filters,!0)}),$scope.hasApplied=function(job){return $scope.candidate.jobs.indexOf(job._id)>-1?!0:!1},$scope.apply=function(job){$http.put("jobs/apply/"+job._id,job).success(function(){$scope.candidate.jobs.push(job),$scope.jobs.splice($scope.jobs.indexOf(job),1),$scope.$apply(),$location.path("jobs/"+job._id)}).error(function(response){$scope.error=response.message})},$scope.filterChanged=function(type,name){console.log("FILTERCHANGED"),$scope.filters1.forEach(function(entry){name==entry.name&&(entry.value=!entry.value,1==entry.value?$scope.addToFilters(entry.type,entry.name):$scope.removeFromFilters(entry.type,entry.name))}),$scope.findJobs($scope.skip,$scope.itemsPerPage,$scope.filters,!1)},$scope.addToFilters=function(type,name){var once=!0,alreadyPresentInFilters=!1;if($scope.filters.forEach(function(entry){type==entry.type&&name==entry.name&&(alreadyPresentInFilters=!0)}),!alreadyPresentInFilters){var typeExists=!1,feefilters=$scope.filters.slice();if(feefilters.forEach(function(entry){type==entry.type&&once&&(once=!1,typeExists=!0,$scope.filters.push({type:type,name:name,priority:entry.priority,value:!0}))}),!typeExists){for(var tmp,highest=0,i=$scope.filters.length-1;i>=0;i--)tmp=$scope.filters[i].priority,tmp>highest&&(highest=tmp);$scope.filters.push({type:type,name:name,priority:highest+1,value:!0})}}},$scope.removeFromFilters=function(type,name){$scope.filters.forEach(function(entry){type==entry.type&&name==entry.name&&$scope.filters.splice($scope.filters.indexOf(entry),1)}),$scope.findJobs($scope.skip,$scope.itemsPerPage,$scope.filters,!1)},$scope.openFilterModal=function(filterArray,name){var modalInstance=$modal.open({templateUrl:"/modules/empoyer-jobs/views/employer-job-candidates/filter-modal.html",controller:"FilterModalCtrl",resolve:{filter:function(){return{values:angular.copy(filterArray),name:name}}}});modalInstance.result.then(function(filterObject){var filternames=[];filterObject.filters.forEach(function(filter){filter.value&&filternames.push(filter.name)}),filterObject.name&&filternames.forEach(function(filter){$scope.addToFilters(filterObject.name,filter)}),$scope.findJobs($scope.skip,$scope.itemsPerPage,$scope.filters,!1)},function(){})}}]).controller("FilterModalCtrl",["$scope","$modalInstance","filter",function($scope,$modalInstance,filter){$scope.filters=filter.values,$scope.name=filter.name,$scope.ok=function(){$modalInstance.close({name:$scope.name,filters:$scope.filters})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]),angular.module("candidate-jobs").controller("SearchJobsController",["$scope","Jobs","$http","Authentication","Candidates","$location","Socket","$rootScope","$stateParams",function($scope,Jobs,$http,Authentication,Candidates,$location,Socket,$rootScope,$stateParams){console.log($rootScope.coords.lat+","+$rootScope.coords.longi),$scope.itemsPerPage=10,$scope.currentPage=0,$scope.isPageChange=!1,$scope.skip=0,$scope.user=Authentication.user,$scope.firsttime=!0,$scope.user||$location.path("/signin"),$scope.range=function(){var start,rangeSize=5,ret=[];start=$scope.currentPage,start>$scope.pageCount()-rangeSize&&(start=$scope.pageCount()-rangeSize);for(var i=start;start+rangeSize>i;i++)i>=0&&ret.push(i);return ret},$scope.prevPage=function(){$scope.currentPage>0&&$scope.currentPage--},$scope.prevPageDisabled=function(){return 0===$scope.currentPage?"disabled":""},$scope.nextPage=function(){$scope.currentPage<$scope.pageCount()-1&&$scope.currentPage++},$scope.nextPageDisabled=function(){return $scope.currentPage===$scope.pageCount()-1?"disabled":""},$scope.pageCount=function(){return Math.ceil($scope.total/$scope.itemsPerPage)},$scope.setPage=function(n){n>=0&&n<$scope.pageCount()&&($scope.currentPage=n)},$scope.candidate=Candidates.get({candidateId:$scope.user.candidate}),$scope.findJobs=function(skip,limit,isPageChange){$http.put("jobs/searchedJobs/"+$scope.user._id,{keyword:$stateParams.keyword,skip:skip,limit:limit,isPageChange:isPageChange}).success(function(job){$scope.jobs=job.jobs,$scope.total=job.total})},$scope.$watch("currentPage",function(newValue){$scope.skip=newValue*$scope.itemsPerPage,0==$scope.skip?$scope.findJobs($scope.skip,$scope.itemsPerPage,!1):$scope.findJobs($scope.skip,$scope.itemsPerPage,!0)}),$scope.hasApplied=function(job){return $scope.candidate.jobs.indexOf(job._id)>-1?!0:!1},$scope.apply=function(job){$http.put("jobs/apply/"+job._id,job).success(function(){$scope.candidate.jobs.push(job),$scope.jobs.splice($scope.jobs.indexOf(job),1),$scope.$apply(),$location.path("jobs/"+job._id)}).error(function(response){$scope.error=response.message})},$scope.filterChanged=function(type,name){$scope.filters1.forEach(function(entry){name==entry.name&&(entry.value=!entry.value,1==entry.value?$scope.addToFilters(entry.type,entry.name):$scope.removeFromFilters(entry.type,entry.name))})},$scope.addToFilters=function(type,name){var once=!0,alreadyPresentInFilters=!1;if($scope.filters.forEach(function(entry){type==entry.type&&name==entry.name&&(alreadyPresentInFilters=!0)}),!alreadyPresentInFilters){var typeExists=!1,feefilters=$scope.filters.slice();if(feefilters.forEach(function(entry){type==entry.type&&once&&(once=!1,typeExists=!0,$scope.filters.push({type:type,name:name,priority:entry.priority,value:!0}))}),!typeExists){for(var tmp,highest=0,i=$scope.filters.length-1;i>=0;i--)tmp=$scope.filters[i].priority,tmp>highest&&(highest=tmp);$scope.filters.push({type:type,name:name,priority:highest+1,value:!0})}}},$scope.removeFromFilters=function(type,name){$scope.filters.forEach(function(entry){type==entry.type&&name==entry.name&&$scope.filters.splice($scope.filters.indexOf(entry),1)})},$scope.openFilterModal=function(filterArray,name){var modalInstance=$modal.open({templateUrl:"/modules/candidate-jobs/views/search-job/filter-modal.html",controller:"FilterModalCtrl",resolve:{filter:function(){return{values:angular.copy(filterArray),name:name}}}});modalInstance.result.then(function(filterObject){var filternames=[];filterObject.filters.forEach(function(filter){filter.value&&filternames.push(filter.name)}),filterObject.name&&filternames.forEach(function(filter){$scope.addToFilters(filterObject.name,filter)})},function(){})}}]).controller("FilterModalCtrl",["$scope","$modalInstance","filter",function($scope,$modalInstance,filter){$scope.filters=filter.values,$scope.name=filter.name,$scope.ok=function(){$modalInstance.close({name:$scope.name,filters:$scope.filters})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]),angular.module("candidate-jobs").directive("filterListOpenJobs",["$compile",function($compile){return{template:"<div></div>",restrict:"E",link:function(scope,element,attrs){var filterName=attrs.filterName,filterNameString="'"+attrs.filterName+"'",count="'count'",filterHeading="";switch(filterName){case"gender":filterHeading="Gender";break;case"salary_expectation":filterHeading="Salary Expectation";break;case"visa_status":filterHeading="Visa";break;case"employee_status":filterHeading="Employment Status";break;case"employee_type":filterHeading="Employment Type";break;case"career_level":filterHeading="Career Level";break;case"skills":filterHeading="Skills";break;case"educations":filterHeading="Education";case"industry":filterHeading="Industry";break;case"location":filterHeading="Location";break;case"salary_range":filterHeading="Salary Range"}scope.$watch("filters1",function(v){filterName=attrs.filterName,filterNameString="'"+attrs.filterName+"'",count="'count'",scope.dummyfilters=[],console.log("FILTERS "+filterName);for(var h=0,j=v.length;j>h;h++)filterName==v[h].type&&scope.dummyfilters.push(v[h]);console.log(scope.dummyfilters);var html="<article><label><strong>"+filterHeading+'</strong></label><ul><li class="checkbox i-checks" data-ng-repeat="'+filterName+"Filter in dummyfilters | orderBy:"+count+':true  | limitTo: filterLimit"><label><input type="checkbox" data-ng-click="filterChanged('+filterNameString+","+filterName+'Filter.name)" data-ng-model="'+filterName+'Filter.value" id="{{'+filterName+" + "+filterName+'Filter.name}}" /><i></i><label ng-if="'+filterName+'Filter.name" for="{{'+filterName+" + "+filterName+'Filter.name}}" >{{'+filterName+"Filter.name}} ({{"+filterName+'Filter.count}})</label><label ng-if="!'+filterName+'Filter.name" for="{{'+filterName+" + "+filterName+'Filter.name}}" >Not Mentioned ({{'+filterName+'Filter.count}})</label></label></li></ul><a href="" data-ng-if="dummyfilters.length > filterLimit" data-ng-click="openFilterModal(dummyfilters, '+filterNameString+')">more choices...</a></article>',e=$compile(html)(scope);element.replaceWith(e)},!0)}}}]),angular.module("candidate-jobs").directive("googleMaps",["$compile",function($compile){return{template:"<div></div>",restrict:"E",link:function(scope,element){scope.$watch("lat",function(){console.log("WTF"+scope.lat);var html='<map zoom="11" center="[{{lat}},{{longi}}]"><marker position="[{{lat}},{{longi}}]" draggable="true" /><control name="overviewMap" opened="false" /></map>',e=$compile(html)(scope);element.replaceWith(e)},!0)}}}]),angular.module("candidate-signup-wizard").config(["$stateProvider",function($stateProvider){$stateProvider.state("candidate-wizard-five",{url:"/candidate-wizard-five",templateUrl:"modules/candidate-signup-wizard/views/candidate-wizard-five.client.view.html"}).state("candidate-wizard-four",{url:"/candidate-wizard-four",templateUrl:"modules/candidate-signup-wizard/views/candidate-wizard-four.client.view.html"}).state("candidate-wizard-three",{url:"/candidate-wizard-three",templateUrl:"modules/candidate-signup-wizard/views/candidate-wizard-three.client.view.html"}).state("candidate-wizard-two",{url:"/candidate-wizard-two",templateUrl:"modules/candidate-signup-wizard/views/candidate-wizard-two.client.view.html"}).state("candidate-wizard-one",{url:"/candidate-wizard-one/:tokenId",templateUrl:"modules/candidate-signup-wizard/views/candidate-wizard-one.client.view.html"})}]),angular.module("candidate-signup-wizard").controller("CandidateSignupController",["$modalInstance","$location","$scope","$modal","$http",function($modalInstance,$location,$scope,$modal,$http){$scope.credentials={},$scope.signup=function(){$scope.credentials.userType="candidate",$http.post("/signupcandidate",$scope.credentials).success(function(response){response.status&&($location.path("/signup-email-activation"),$modalInstance.dismiss())}).error(function(response){$scope.error=response.message})}}]),angular.module("candidate-signup-wizard").controller("CandidateWizardFiveController",["$scope","$http","$state","Authentication","Candidates",function($scope,$http,$state,Authentication,Candidates){$scope.candidate={},$scope.LoadInitialData=function(){$scope.authentication=Authentication,$scope.candidate=Candidates.get({candidateId:$scope.authentication.user.candidate})},$scope.SaveAndRedirect=function(){$scope.success=$scope.error=null,"Five"==$scope.candidate.stage&&($scope.candidate.stage="Complete");
var candidate=$scope.candidate;candidate.$update(function(){$state.go("candidate-wizard-four")},function(){$scope.error=response.message})}}]),angular.module("candidate-signup-wizard").controller("CandidateWizardFourController",["$scope","$http","$state","Authentication","Candidates","locationVarification","$location",function($scope,$http,$state,Authentication,Candidates,locationVarification,$location){$scope.authentication=Authentication;$scope.authentication.user||$state.go("home");var marker,geocoder=new google.maps.Geocoder;$scope.candidate={},$scope.LoadInitialData=function(){console.log($scope.authentication.user.candidate),$scope.candidate=Candidates.get({candidateId:$scope.authentication.user.candidate},function(){console.log($scope.candidate);locationVarification.validateLocation($scope.candidate.location,$scope.candidate.country,$scope.candidate.coordinates.latitude,$scope.candidate.coordinates.longitude).then(function(responseFromLocationFactory){console.log(responseFromLocationFactory[0]),"true"==responseFromLocationFactory[0]?geocoder.geocode({address:$scope.candidate.location+","+$scope.candidate.country},function(results,status){if(status==google.maps.GeocoderStatus.OK){var map=$scope.map;map.center=results[0].geometry.location,$scope.map.setCenter(results[0].geometry.location),marker=new google.maps.Marker({position:new google.maps.LatLng($scope.candidate.coordinates.latitude,$scope.candidate.coordinates.longitude),map:map,draggable:!0,animation:google.maps.Animation.DROP,title:"Select your company Location!"})}else alert("Geocode was not successful for the following reason: "+status)}):geocoder.geocode({address:$scope.candidate.location+","+$scope.candidate.country},function(results,status){if(status==google.maps.GeocoderStatus.OK){console.log(results[0].geometry.location.lat()),$scope.candidate.coordinates.latitude=results[0].geometry.location.lat(),$scope.candidate.coordinates.longitude=results[0].geometry.location.lng();var map=$scope.map;map.center=results[0].geometry.location,$scope.map.setCenter(results[0].geometry.location),marker=new google.maps.Marker({position:new google.maps.LatLng($scope.candidate.coordinates.latitude,$scope.candidate.coordinates.longitude),map:map,draggable:!0,animation:google.maps.Animation.DROP,title:"Select your company Location!"})}else alert("Geocode was not successful for the following reason: "+status)})})})},$scope.Back=function(){$location.path("candidate-wizard-three")},$scope.SaveAndRedirect=function(){$scope.success=$scope.error=null,"Four"==$scope.candidate.stage&&($scope.candidate.stage="Complete");var candidate=$scope.candidate;candidate.coordinates.latitude=marker.position.k,candidate.coordinates.longitude=marker.position.D,console.log(candidate),candidate.$update(function(){$state.go("home")},function(){$scope.error=response.message})},$scope.SkipAndRedirect=function(){$scope.success=$scope.error=null,"Four"==$scope.candidate.stage&&($scope.candidate.stage="Complete");var candidate=$scope.candidate;candidate.$update(function(){$state.go("home")},function(){$scope.error=response.message})}}]),angular.module("candidate-signup-wizard").controller("CandidateWizardOneController",["$scope","$http","$state","$stateParams","Authentication","$modal","Countries","geolocation",function($scope,$http,$state,$stateParams,Authentication,$modal,Countries,geolocation){var city1="",country1="",lat=0,lng=0,countrycityset=!0;$scope.candidate={coordinates:{longitude:0,latitude:0},country:{},city:{}},$scope.LoadInitialData=function(){$stateParams.tokenId?$http.post("/validatetoken",{token:$stateParams.tokenId}).success(function(response){$scope.user=response.user,"nothing"==$scope.user.user?$state.go("home"):($scope.authentication=Authentication,$scope.authentication.user=response.user,$scope.candidate=response.candidate,$scope.candidate.visa_status="No Visa",$scope.candidate.gender="Male",$scope.candidate.career_level="Student/Internship",$scope.candidate.employee_status="Part Time",$scope.candidate.employee_type="Permanent",$scope.candidate.salary_expectation="$1000 - $2000","choose a country"===$scope.candidate.country&&(countrycityset=!1),Countries.getCountries(function(countries){$scope.countries=countries,console.log($scope.candidate.country),countrycityset?angular.forEach($scope.countries,function(country){$scope.candidate.country==country.name&&($scope.candidate.country=country,$scope.getCountryCities())}):(console.log($scope.countries[1]),$scope.candidate.country=$scope.countries[1],$scope.getCountryCities(),InitlocationData())}))}).error(function(response){$scope.error=response.message}):$state.go("home")},$scope.SaveAndRedirect=function(){console.log($scope.candidate),$scope.success=$scope.error=null,"One"==$scope.candidate.stage&&($scope.candidate.stage="Two"),$http.post("/savecandidatewizardonedata",{candidate:$scope.candidate}).success(function(){$state.go("candidate-wizard-two")}).error(function(response){$scope.error=response.message})};var InitlocationData=function(){var geocoder=new google.maps.Geocoder;geolocation.getLocation().then(function(data){lat=parseFloat(data.coords.latitude),lng=parseFloat(data.coords.longitude),$scope.candidate.coordinates.longitude=lng,$scope.candidate.coordinates.latitude=lat;var latlng=new google.maps.LatLng(lat,lng);geocoder.geocode({latLng:latlng},function(results,status){if(status==google.maps.GeocoderStatus.OK)if(results[1]){var citycountry=results[1].formatted_address,res=citycountry.split(",");country1=res[res.length-1],city1=res[res.length-2],city1=city1.trim(),country1=country1.trim(),console.log(country1+" "+city1),angular.forEach($scope.countries,function(country){countrycityset&&(country1=$scope.candidate.country),country1==country.name&&($scope.candidate.country=country,$scope.getCountryCities())})}else $scope.candidate.country=$scope.countries[0],$scope.getCountryCities();else $scope.candidate.country=$scope.countries[0],$scope.getCountryCities()})})};$scope.getCountryCities=function(){var foundit=!1;console.log($scope.candidate.country),$http.get("/countries/"+$scope.candidate.country.name).success(function(response){$scope.cities=response.cities,angular.forEach($scope.cities,function(city){countrycityset&&(city1=$scope.candidate.location),city.name==city1&&(console.log(city),$scope.candidate.location=city,foundit=!0)}),foundit||($scope.candidate.location=$scope.cities[0])})},$scope.openCandidatePictureModal=function(){var modalInstance;modalInstance=$modal.open({templateUrl:"/modules/candidate-features/views/cv-partials/picture-partial.html",controller:"CandidatePictureModalCtrl"}),modalInstance.result.then(function(result){$scope.candidate.picture_url=result.picture_url},function(){})}}]).controller("CandidatePictureModalCtrl",["$scope","$modalInstance","$upload",function($scope,$modalInstance,$upload){var convert=function(dataURI,mimetype){for(var BASE64_MARKER=";base64,",base64Index=dataURI.indexOf(BASE64_MARKER)+BASE64_MARKER.length,base64=dataURI.substring(base64Index),raw=window.atob(base64),rawLength=raw.length,uInt8Array=new Uint8Array(rawLength),i=0;rawLength>i;++i)uInt8Array[i]=raw.charCodeAt(i);var bb=new Blob([uInt8Array.buffer],{type:mimetype});return bb};$scope.upload=function(image){$scope.formData=convert(image.dataURL,image.type),$scope.upload=$upload.upload({url:"/uploadCandidatePicture",method:"POST",headers:{"Content-Type":"undefined"},data:{myObj:$scope.myModelObj},file:$scope.formData}).progress(function(evt){console.log("percent: "+parseInt(100*evt.loaded/evt.total))}).success(function(data){$scope.response=data,console.log(data),$modalInstance.close({picture_url:data})})},$scope.ok=function(action){$modalInstance.close({action:action,picture_url:$scope.picture_url})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]),angular.module("candidate-signup-wizard").controller("CandidateWizardThreeController",["$scope","$http","$state","Authentication","Candidates",function($scope,$http,$state,Authentication,Candidates){$scope.candidate={},$scope.questions=[{title:"Write about yourself"},{title:"Describe your strengths"},{title:"Describe your weekness"}],$scope.LoadInitialData=function(){$scope.authentication=Authentication,$scope.candidate=Candidates.get({candidateId:$scope.authentication.user.candidate})},$scope.SaveAndRedirect=function(){$scope.success=$scope.error=null,"Three"==$scope.candidate.stage&&($scope.candidate.stage="Four");var candidate=$scope.candidate;candidate.questions||(candidate.questions=[]),angular.forEach($scope.questions,function(question){$scope.questions&&""!=$scope.question&&candidate.interview_questions.push(question)}),candidate.$update(function(){$state.go("candidate-wizard-four")},function(){$scope.error=response.message})}}]),angular.module("candidate-signup-wizard").controller("CandidateWizardTwoController",["$scope","$http","$state","Authentication","Candidates","$location",function($scope,$http,$state,Authentication,Candidates,$location){$scope.candidate={},$scope.degree_titles=["High School","Associate Degree","Bachelor Degree","Master Degree","Master of Business Administration (M.B.A.)","Juris Doctor (J.D.)","Doctor of Medicine (M.D.)","Doctor of Philosophy (Ph.D.)","Engineers Degree"],$scope.LoadInitialData=function(){$scope.authentication=Authentication,$scope.candidate=Candidates.get({candidateId:$scope.authentication.user.candidate})},$scope.addEducation=function(){""!=$scope.newEducation.degree_title&&($scope.candidate.educations.push($scope.newEducation),$scope.newEducation={})},$scope.removeEducation=function(index){$scope.candidate.educations.splice(index,1)},$scope.addPosition=function(){""!=$scope.newPosition.company&&($scope.candidate.positions.push($scope.newPosition),$scope.newPosition={name:""})},$scope.removePosition=function(index){$scope.candidate.positions.splice(index,1)},$scope.addProject=function(){""!=$scope.newProject.company&&($scope.candidate.projects.push($scope.newProject),$scope.newProject={name:""})},$scope.removeProject=function(index){$scope.candidate.projects.splice(index,1)},$scope.addSkill=function(){""!=$scope.newSkill.title&&($scope.candidate.skills.push($scope.newSkill),$scope.newSkill={name:""})},$scope.removeSkill=function(index){$scope.candidate.skills.splice(index,1)},$scope.GoBack=function(){$location.path("candidate-wizard-one/"+Authentication.user.activeToken)},$scope.SaveAndRedirect=function(){$scope.success=$scope.error=null,"Two"==$scope.candidate.stage&&($scope.candidate.stage="Four");var candidate=$scope.candidate;candidate.$update(function(){$state.go("candidate-wizard-four")},function(){$scope.error=response.message})}}]),angular.module("candidates").run(["Menus",function(Menus){Menus.addMenuItem("topbar","Candidates","candidates","dropdown","/candidates(/create)?"),Menus.addSubMenuItem("topbar","candidates","List Candidates","candidates"),Menus.addSubMenuItem("topbar","candidates","New Candidate","candidates/create")}]),angular.module("candidates").config(["$stateProvider",function($stateProvider){$stateProvider.state("listCandidates",{url:"/candidates",templateUrl:"modules/candidates/views/list-candidates.client.view.html"}).state("createCandidate",{url:"/candidates/create",templateUrl:"modules/candidates/views/create-candidate.client.view.html"}).state("viewCandidate",{url:"/candidates/:candidateId",templateUrl:"modules/candidates/views/view-candidate.client.view.html"}).state("editCandidate",{url:"/candidates/:candidateId/edit",templateUrl:"modules/candidates/views/edit-candidate.client.view.html"})}]),angular.module("candidates").controller("CandidatesController",["$scope","$stateParams","$location","Authentication","Candidates",function($scope,$stateParams,$location,Authentication,Candidates){$scope.authentication=Authentication,$scope.create=function(){var candidate=new Candidates({name:this.name});candidate.$save(function(response){$location.path("candidates/"+response._id)},function(errorResponse){$scope.error=errorResponse.data.message}),this.name=""},$scope.remove=function(candidate){if(candidate){candidate.$remove();for(var i in $scope.candidates)$scope.candidates[i]===candidate&&$scope.candidates.splice(i,1)}else $scope.candidate.$remove(function(){$location.path("candidates")})},$scope.update=function(){var candidate=$scope.candidate;candidate.$update(function(){$location.path("candidates/"+candidate._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.candidates=Candidates.query()},$scope.findOne=function(){$scope.candidate=Candidates.get({candidateId:$stateParams.candidateId})}}]),angular.module("candidates").factory("Candidates",["$resource",function($resource){return $resource("candidates/:candidateId",{candidateId:"@_id"},{update:{method:"PUT"}})}]),angular.module("companies").run(["Menus",function(Menus){Menus.addMenuItem("topbar","Companies","companies","dropdown","/companies(/create)?"),Menus.addSubMenuItem("topbar","companies","List Companies","companies"),Menus.addSubMenuItem("topbar","companies","New Company","companies/create")}]),angular.module("companies").config(["$stateProvider",function($stateProvider){$stateProvider.state("listCompanies",{url:"/companies",templateUrl:"modules/companies/views/list-companies.client.view.html"}).state("createCompany",{url:"/companies/create",templateUrl:"modules/companies/views/create-company.client.view.html"}).state("viewCompany",{url:"/companies/:companyId",templateUrl:"modules/companies/views/view-company.client.view.html"}).state("editCompany",{url:"/companies/:companyId/edit",templateUrl:"modules/companies/views/edit-company.client.view.html"})}]),angular.module("companies").controller("CompaniesController",["$scope","$stateParams","$location","Authentication","Companies",function($scope,$stateParams,$location,Authentication,Companies){$scope.authentication=Authentication,$scope.create=function(){var company=new Companies({name:this.name});company.$save(function(response){$location.path("companies/"+response._id)},function(errorResponse){$scope.error=errorResponse.data.message}),this.name=""},$scope.remove=function(company){if(company){company.$remove();for(var i in $scope.companies)$scope.companies[i]===company&&$scope.companies.splice(i,1)}else $scope.company.$remove(function(){$location.path("companies")})},$scope.update=function(){var company=$scope.company;company.$update(function(){$location.path("companies/"+company._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.companies=Companies.query()},$scope.findOne=function(){$scope.company=Companies.get({companyId:$stateParams.companyId})}}]),angular.module("companies").factory("Companies",["$resource",function($resource){return $resource("companies/:companyId",{companyId:"@_id"},{update:{method:"PUT"}})}]),angular.module("core").config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("employer-landing",{url:"/employer-landing",templateUrl:"modules/core/views/employer-landing.client.view.html"}).state("test",{url:"/test",templateUrl:"modules/core/views/test.client.view.html"}).state("transition",{url:"/transition",templateUrl:"modules/core/views/transition.client.view.html",controller:"TransitionController"}).state("transition.userType",{url:"/userType",templateUrl:"modules/core/views/transition-userType.client.view.html"}).state("transition.importCv",{url:"/importCv",templateUrl:"modules/core/views/transition-importCv.client.view.html"}).state("home",{url:"/",templateUrl:"modules/core/views/landing-page/index.html"}).state("employerDashboard",{url:"/employer",templateUrl:"modules/core/views/employer-home.client.view.html"}).state("candidateDashboard",{url:"/candidate",templateUrl:"modules/core/views/candidate-home.client.view.html"})}]),angular.module("users").controller("AuthenticationController",["$scope","$http","$location","Authentication","$state",function($scope,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.signup=function(){$http.post("/auth/signup",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})};var changeLocation=function(url,forceReload){$scope=$scope||angular.element(document).scope(),forceReload||$scope.$$phase?window.location=url:($location.path(url),$scope.$apply())};$scope.signin=function(){$http.post("/auth/signin",$scope.credentials).success(function(response){$scope.authentication.user=response,changeLocation("/")}).error(function(response){console.log(response.message),$scope.error=response.message})}}]),angular.module("core").controller("EmployerLandingController",["$scope","$modal",function($scope,$modal){$scope.openPostjobModal=function(){var modalInstance=$modal.open({templateUrl:"/modules/employer-signup-wizard/views/partials/employer-signup-partial.html",controller:"EmpSignupController"});modalInstance.result.then(function(result){console.log(result)},function(){})}}]),angular.module("core").controller("HeaderController",["$scope","Authentication","Menus","Socket","$http","$location","$rootScope","toaster",function($scope,Authentication,Menus,Socket,$http,$location,$rootScope,toaster){console.log("HEADER CLIENT CONTROLLER"),$scope.authentication=Authentication,$scope.isCollapsed=!1,$scope.menu=Menus.getMenu("topbar"),$scope.threads=[],$scope.unreadnotificationslength=0,$scope.user=$scope.authentication.user,console.log(Authentication),$scope.notifications=[];if($scope.list=" ",$scope.texts=" ",$scope.submit=function(){$scope.texts&&($scope.list=this.texts,$rootScope=$scope.list,$scope.texts=" ",$location.path("/search-jobs/"+$scope.list))},$scope.findMeAJob=function(){$location.path("/search-jobs/find-me-a-job")},$scope.notificationRead=function(data){$http.post("/users/readNotification/"+$scope.authentication.user._id,data).success(function(res){"not-read"==res.outgoing&&$scope.unreadnotificationslength--;for(var i in $scope.notifications)$scope.notifications[i]===data&&$scope.notifications.length>10&&$scope.notifications.splice(i,1);$scope.apply()}).error(function(){})},$scope.authentication.user){$scope.isCandidate=function(){return"candidate"===$scope.authentication.user.userType?!0:!1};for(var count=0,y=$scope.authentication.user.notifications.length,x=0;y>x;x++)$scope.authentication.user.notifications[x].isRead||($scope.notifications=$scope.authentication.user.notifications[x],count++);if($scope.unreadnotificationslength=count--,10>count&&y>=10)for(var x=0;10>count;)$scope.authentication.user.notifications[x].isRead&&($scope.notifications=$scope.authentication.user.notifications[x]),count++,x++;$scope.notifications=$scope.authentication.user.notifications,Socket.on("take_the_test_notification",function(data){if(console.log("GOT A HIT"),data.userid==$scope.authentication.user._id){for(var present=!1,d=0,len=$scope.notifications.length;len>d;d++)if($scope.notifications[d]._id==data.notification._id){present=!0;break}present||($scope.notifications.push(data.notification),$scope.unreadnotificationslength++)}}),Socket.on("watched_thread_to",function(){$scope.threads=[],console.log("wactched_thread_to works"),$http.get("/users/getMessages/"+$scope.authentication.user._id).success(function(res){if(res.length>1)for(var x=1;x<res.length;x++)$scope.threads.push(res[x])}).error(function(){console.log("Shouldnt have happened")})}),console.log($scope.authentication.user._id),$http.get("/users/getMessages/"+$scope.authentication.user._id).success(function(res){if(console.log("GETMESSAGE"+res),res.length>1)for(var x=1;x<res.length;x++)null==res[x].senderName&&(res[x].senderName="From Recreal Team"),$scope.threads.push(res[x])}).error(function(){console.log("Shouldnt have happened")}),Socket.on("message_sent_to",function(data){if(data.message.receiver===$scope.authentication.user._id){var alreadyexists=!1;console.log(data);for(var thread={id:data.message.idc,senderName:data.message.sender.displayName,created:data.message.messages.created,count:1},d=0,h=$scope.threads.length;h>d;d++)if($scope.threads[d].id==thread.id){$scope.threads[d].count++,alreadyexists=!0;break}alreadyexists||($scope.threads.push(thread),toaster.pop("success","Message received",data.message.sender.displayName))}})}$scope.toggleCollapsibleMenu=function(){$scope.isCollapsed=!$scope.isCollapsed},$scope.$on("$stateChangeSuccess",function(){$scope.isCollapsed=!1})}]),angular.module("core").controller("HomeController",["$scope","$modal","Authentication","$state","$rootScope","Employers","Companies","Candidates","Socket","$location",function($scope,$modal,Authentication,$state,$rootScope,Employers,Companies,Candidates,Socket,$location){function getRandomData(){for(data.length>0&&(data=data.slice(1));data.length<totalPoints;){var prev=data.length>0?data[data.length-1]:50,y=prev+10*Math.random()-5;0>y?y=0:y>100&&(y=100),data.push(y)}for(var res=[],i=0;i<data.length;++i)res.push([i,data[i]]);return res}function update(){live.setData([getRandomData()]),live.draw(),setTimeout(update,updateInterval)}$scope.OpenCandidateSignUpModal=function(){var modalInstance=$modal.open({templateUrl:"/modules/candidate-signup-wizard/views/partials/candidate-signup-partial.html",controller:"CandidateSignupController"});modalInstance.result.then(function(result){console.log(result)},function(){})},$scope.authentication=Authentication;var user=$scope.authentication.user;console.log(user),user?"employer"===user.userType?("Basic"==$scope.authentication.user.stage&&$location.path("emp-wizard-one/"+$scope.authentication.user.activeToken),"CompanyLocation"==$scope.authentication.user.stage&&$location.path("emp-wizard-two"),"NoJobs"==$scope.authentication.user.stage&&($scope.employer=Employers.get({employerId:$scope.authentication.user.employer},function(employer){console.log(employer),$location.path(employer.jobs.length>0?"emp-job-post-two/"+employer.jobs[0]:"emp-job-post-one")})),"Active"==$scope.authentication.user.stage&&($rootScope.employer=Employers.get({employerId:$scope.authentication.user.employer},function(employer){$rootScope.company=Companies.get({companyId:employer.company})}),$state.go("company-open-jobs"))):"candidate"===user.userType?$rootScope.candidate=Candidates.get({candidateId:$scope.authentication.user.candidate},function(candidate){switch(candidate.stage){case"One":$location.path("candidate-wizard-one/"+$scope.authentication.user.activeToken);break;case"Two":$state.go("candidate-wizard-two");break;case"Three":$state.go("candidate-wizard-three");break;case"Four":$state.go("candidate-wizard-four");break;case"Five":$state.go("candidate-wizard-five");break;case"Complete":$state.go("candidate-home")}}):"transition"===user.userType&&$state.go("transition"):$state.go("home");for(var d1=[],i=0;11>=i;i+=1)d1.push([i,parseInt(Math.floor(11*Math.random())+10)]);$("#flot-1ine").length&&$.plot($("#flot-1ine"),[{data:d1}],{series:{lines:{show:!0,lineWidth:1,fill:!0,fillColor:{colors:[{opacity:.3},{opacity:.3}]}},points:{radius:3,show:!0},grow:{active:!0,steps:50},shadowSize:2},grid:{hoverable:!0,clickable:!0,tickColor:"#f0f0f0",borderWidth:1,color:"#f0f0f0"},colors:["#1bb399"],xaxis:{},yaxis:{ticks:5},tooltip:!0,tooltipOpts:{content:"chart: %x.1 is %y.4",defaultTheme:!1,shifts:{x:0,y:20}}});var d0=[[0,0],[1,0],[2,1],[3,2],[4,15],[5,5],[6,12],[7,10],[8,55],[9,13],[10,25],[11,10],[12,12],[13,6],[14,2],[15,0],[16,0]],d00=[[0,0],[1,0],[2,1],[3,0],[4,1],[5,0],[6,2],[7,0],[8,3],[9,1],[10,0],[11,1],[12,0],[13,2],[14,1],[15,0],[16,0]];$("#flot-sp1ine").length&&$.plot($("#flot-sp1ine"),[d0,d00],{series:{lines:{show:!1},splines:{show:!0,tension:.4,lineWidth:1,fill:.4},points:{radius:0,show:!0},shadowSize:2},grid:{hoverable:!0,clickable:!0,tickColor:"#d9dee9",borderWidth:1,color:"#d9dee9"},colors:["#19b39b","#644688"],xaxis:{},yaxis:{ticks:4},tooltip:!0,tooltipOpts:{content:"chart: %x.1 is %y.4",defaultTheme:!1,shifts:{x:0,y:20}}});for(var d2=[],i=0;6>=i;i+=1)d2.push([i,parseInt(Math.floor(21*Math.random())+10)]);for(var d3=[],i=0;6>=i;i+=1)d3.push([i,parseInt(Math.floor(21*Math.random())+10)]);$("#flot-chart").length&&$.plot($("#flot-chart"),[{data:d2,label:"Unique Visits"},{data:d3,label:"Page Views"}],{series:{lines:{show:!0,lineWidth:1,fill:!0,fillColor:{colors:[{opacity:.3},{opacity:.3}]}},points:{show:!0},shadowSize:2},grid:{hoverable:!0,clickable:!0,tickColor:"#f0f0f0",borderWidth:0},colors:["#1bb399","#177bbb"],xaxis:{ticks:15,tickDecimals:0},yaxis:{ticks:10,tickDecimals:0},tooltip:!0,tooltipOpts:{content:"'%s' of %x.1 is %y.4",defaultTheme:!1,shifts:{x:0,y:20}}});var live,data=[],totalPoints=300,updateInterval=30;$("#flot-live").length&&(live=$.plot("#flot-live",[getRandomData()],{series:{lines:{show:!0,lineWidth:1,fill:!0,fillColor:{colors:[{opacity:.2},{opacity:.1}]}},shadowSize:2},colors:["#cccccc"],yaxis:{min:0,max:100},xaxis:{show:!1},grid:{tickColor:"#f0f0f0",borderWidth:0}}))&&update();var d1_1=[[10,120],[20,70],[30,100],[40,60]],d1_2=[[10,80],[20,60],[30,30],[40,35]],d1_3=[[10,80],[20,40],[30,30],[40,20]],data1=[{label:"Product 1",data:d1_1,bars:{show:!0,fill:!0,lineWidth:1,order:1,fillColor:{colors:[{opacity:.5},{opacity:.9}]}},color:"#6783b7"},{label:"Product 2",data:d1_2,bars:{show:!0,fill:!0,lineWidth:1,order:2,fillColor:{colors:[{opacity:.5},{opacity:.9}]}},color:"#4fcdb7"},{label:"Product 3",data:d1_3,bars:{show:!0,fill:!0,lineWidth:1,order:3,fillColor:{colors:[{opacity:.5},{opacity:.9}]}},color:"#8dd168"}],d2_1=[[90,10],[70,20]],d2_2=[[80,10],[60,20]],d2_3=[[120,10],[50,20]],data2=[{label:"Product 1",data:d2_1,bars:{horizontal:!0,show:!0,fill:!0,lineWidth:1,order:1,fillColor:{colors:[{opacity:.5},{opacity:1}]}},color:"#6783b7"},{label:"Product 2",data:d2_2,bars:{horizontal:!0,show:!0,fill:!0,lineWidth:1,order:2,fillColor:{colors:[{opacity:.5},{opacity:1}]}},color:"#4fcdb7"},{label:"Product 3",data:d2_3,bars:{horizontal:!0,show:!0,fill:!0,lineWidth:1,order:3,fillColor:{colors:[{opacity:.5},{opacity:1}]}},color:"#8dd168"}];$("#flot-bar").length&&$.plot($("#flot-bar"),data1,{xaxis:{},yaxis:{},grid:{hoverable:!0,clickable:!1,borderWidth:0},legend:{labelBoxBorderColor:"none",position:"left"},series:{shadowSize:1},tooltip:!0}),$("#flot-bar-h").length&&$.plot($("#flot-bar-h"),data2,{xaxis:{},yaxis:{},grid:{hoverable:!0,clickable:!1,borderWidth:0},legend:{labelBoxBorderColor:"none",position:"left"},series:{shadowSize:1},tooltip:!0});for(var da=[{label:"iPhone5S",data:40},{label:"iPad Mini",data:10},{label:"iPad Mini Retina",data:20},{label:"iPhone4S",data:12},{label:"iPad Air",data:18}],da1=[],series=Math.floor(4*Math.random())+3,i=0;series>i;i++)da1[i]={label:"Series"+(i+1),data:Math.floor(100*Math.random())+1};$("#flot-pie-donut").length&&$.plot($("#flot-pie-donut"),da,{series:{pie:{innerRadius:.4,show:!0,stroke:{width:0},label:{show:!0,threshold:.05}}},colors:["#65b5c2","#4da7c1","#3993bb","#2e7bad","#23649e"],grid:{hoverable:!0,clickable:!1},tooltip:!0,tooltipOpts:{content:"%s: %p.0%"}}),$("#flot-pie").length&&$.plot($("#flot-pie"),da,{series:{pie:{combine:{color:"#999",threshold:.05},show:!0}},colors:["#65b5c2","#4da7c1","#3993bb","#2e7bad","#23649e"],legend:{show:!1},grid:{hoverable:!0,clickable:!1},tooltip:!0,tooltipOpts:{content:"%s: %p.0%"}});var cTime=new Date,month=cTime.getMonth()+1,year=cTime.getFullYear(),theMonths=["January","February","March","April","May","June","July","August","September","October","November","December"],theDays=["S","M","T","W","T","F","S"],events=[["4/"+month+"/"+year,"Meet a friend","#","#177bbb","Contents here"],["7/"+month+"/"+year,"Kick off meeting!","#","#1bbacc","Have a kick off meeting with .inc company"],["17/"+month+"/"+year,"Milestone release","#","#fcc633","Contents here"],["19/"+month+"/"+year,"A link","http://www.google.com","#e33244"]];$("#calendar").calendar({months:theMonths,days:theDays,events:events,popover_options:{placement:"top",html:!0}})}]),angular.module("core").controller("TestController",["$scope",function(){}]),angular.module("core").controller("TransitionController",["$scope","Authentication","$http","$state","$rootScope","Employers","Companies","Candidates","Socket","$location",function($scope,Authentication,$http,$state,$rootScope,Employers,Companies,Candidates,Socket,$location){$scope.authentication=Authentication,$scope.formData={userType:""},$scope.$watch("formData.userType",function(){"Employer"==$scope.formData.userType&&becomeEmployer()}),$scope.$watch("formData.importCV",function(){"import"==$scope.formData.importCV?$location.path("/linkedin-cv"):"dontimport"==$scope.formData.importCV&&becomeEmployee()});var becomeEmployer=function(){console.log($scope.authentication.user.userType),"transition"==$scope.authentication.user.userType&&$http.put("/users/setUserType/"+$scope.authentication.user._id,{userType:"employer"}).success(function(user){$rootScope.employer=Employers.get({employerId:user.employer},function(employer){$rootScope.company=Companies.get({companyId:employer.company})}),$scope.authentication.user.userType="employer",$location.path("/company-profile")})},becomeEmployee=function(){"transition"==$scope.authentication.user.userType&&($http.put("/users/setUserType/"+$scope.authentication.user._id,{userType:"candidate"}).success(function(user){console.log(user)}),$rootScope.candidate=Candidates.get({candidate:$scope.authentication.user.candidate}),$scope.authentication.user.userType="candidate",$state.go("candidate-home"))}}]),angular.module("core").directive("image",["$q",function($q){var URL=window.URL||window.webkitURL,getResizeArea=function(){var resizeAreaId="fileupload-resize-area",resizeArea=document.getElementById(resizeAreaId);return resizeArea||(resizeArea=document.createElement("canvas"),resizeArea.id=resizeAreaId,resizeArea.style.visibility="hidden",document.body.appendChild(resizeArea)),resizeArea},resizeImage=function(origImage,options){var maxHeight=options.resizeMaxHeight||300,maxWidth=options.resizeMaxWidth||250,quality=options.resizeQuality||.7,type=options.resizeType||"image/jpg",canvas=getResizeArea(),height=origImage.height,width=origImage.width;width>height?width>maxWidth&&(height=Math.round(height*=maxWidth/width),width=maxWidth):height>maxHeight&&(width=Math.round(width*=maxHeight/height),height=maxHeight),canvas.width=width,canvas.height=height;var ctx=canvas.getContext("2d");return ctx.drawImage(origImage,0,0,width,height),canvas.toDataURL(type,quality)},createImage=function(url,callback){var image=new Image;image.onload=function(){callback(image)},image.src=url},fileToDataURL=function(file){var deferred=$q.defer(),reader=new FileReader;return reader.onload=function(e){deferred.resolve(e.target.result)},reader.readAsDataURL(file),deferred.promise};return{restrict:"A",scope:{image:"=",resizeMaxHeight:"@?",resizeMaxWidth:"@?",resizeQuality:"@?",resizeType:"@?"},link:function(scope,element,attrs){var doResizing=function(imageResult,callback){createImage(imageResult.url,function(image){var dataURL=resizeImage(image,scope);imageResult.resized={dataURL:dataURL,type:dataURL.match(/:(.+\/.+);/)[1]},callback(imageResult)})},applyScope=function(imageResult){scope.$apply(function(){attrs.multiple?scope.image.push(imageResult):scope.image=imageResult})};element.bind("change",function(evt){attrs.multiple&&(scope.image=[]);for(var files=evt.target.files,i=0;i<files.length;i++){var imageResult={file:files[i],url:URL.createObjectURL(files[i])};fileToDataURL(files[i]).then(function(dataURL){imageResult.dataURL=dataURL}),scope.resizeMaxHeight||scope.resizeMaxWidth?doResizing(imageResult,function(imageResult){applyScope(imageResult)}):applyScope(imageResult)}})}}}]),angular.module("core").directive("triggerJobList",["$compile","$rootScope","$http","Jobs","Employers","Companies",function($compile,$rootScope,$http,Jobs,Employers,Companies){return{template:"<div></div>",restrict:"E",link:function(scope,element){$rootScope.$on("inEmployerJobupdateHeader",function(args){scope.jobs=[],scope.employer=Employers.get({employerId:scope.user.employer},function(employer){scope.company=Companies.get({companyId:employer.company},function(company){var gg=company.jobs;
$http.put("jobs/jobsByIDs/"+scope.user._id,gg).success(function(res){scope.jobslist=[];for(var d,g=res.length;g>d;d++)scope.jobslist.push({name:res[d].title,id:res[d]._id});if(scope.myColor=scope.jobslist[1],args.trigger)var html='<select ng-model="myColor" ng-options="joblist.name for joblist in jobslist"></select><br>';else var html="";var e=$compile(html)(scope);element.replaceWith(e)})})})})}}}]),angular.module("core").filter("truncate",[function(){return function(text,length,end){return isNaN(length)&&(length=10),void 0===end&&(end="..."),text.length<=length||text.length-end.length<=length?text:String(text).substring(0,length-end.length)+end}}]),angular.module("core").service("Menus",[function(){this.defaultRoles=["user"],this.menus={};var shouldRender=function(user){if(!user)return this.isPublic;for(var userRoleIndex in user.roles)for(var roleIndex in this.roles)if(this.roles[roleIndex]===user.roles[userRoleIndex])return!0;return!1};this.validateMenuExistance=function(menuId){if(menuId&&menuId.length){if(this.menus[menuId])return!0;throw new Error("Menu does not exists")}throw new Error("MenuId was not provided")},this.getMenu=function(menuId){return this.validateMenuExistance(menuId),this.menus[menuId]},this.addMenu=function(menuId,isPublic,roles){return this.menus[menuId]={isPublic:isPublic||!1,roles:roles||this.defaultRoles,items:[],shouldRender:shouldRender},this.menus[menuId]},this.removeMenu=function(menuId){this.validateMenuExistance(menuId),delete this.menus[menuId]},this.addMenuItem=function(menuId,menuItemTitle,menuItemURL,menuItemType,menuItemUIRoute,isPublic,roles){return this.validateMenuExistance(menuId),this.menus[menuId].items.push({title:menuItemTitle,link:menuItemURL,menuItemType:menuItemType||"item",menuItemClass:menuItemType,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:isPublic||this.menus[menuId].isPublic,roles:roles||this.defaultRoles,items:[],shouldRender:shouldRender}),this.menus[menuId]},this.addSubMenuItem=function(menuId,rootMenuItemURL,menuItemTitle,menuItemURL,menuItemUIRoute,isPublic,roles){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===rootMenuItemURL&&this.menus[menuId].items[itemIndex].items.push({title:menuItemTitle,link:menuItemURL,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:isPublic||this.menus[menuId].isPublic,roles:roles||this.defaultRoles,shouldRender:shouldRender});return this.menus[menuId]},this.removeMenuItem=function(menuId,menuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===menuItemURL&&this.menus[menuId].items.splice(itemIndex,1);return this.menus[menuId]},this.removeSubMenuItem=function(menuId,submenuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)for(var subitemIndex in this.menus[menuId].items[itemIndex].items)this.menus[menuId].items[itemIndex].items[subitemIndex].link===submenuItemURL&&this.menus[menuId].items[itemIndex].items.splice(subitemIndex,1);return this.menus[menuId]},this.addMenu("topbar")}]),angular.module("core").factory("Socket",["$rootScope","Authentication","geolocation",function($rootScope,Authentication,geolocation){if(Authentication.user&&!socket){console.log("SOCKET CLIENT FACTORY"),$rootScope.coords={lat:0,longi:0},geolocation.getLocation().then(function(data){$rootScope.coords={lat:data.coords.latitude,longi:data.coords.longitude}});var socket=io.connect("https://morning-sea-1792.herokuapp.com");socket.emit("user_data",Authentication.user)}return{on:function(eventName,callback){socket.on(eventName,function(){var args=arguments;$rootScope.$apply(function(){callback.apply(socket,args)})})},emit:function(eventName,data,callback){socket.emit(eventName,data,function(){var args=arguments;$rootScope.$apply(function(){callback&&callback.apply(socket,args)})})}}}]),angular.module("employer-company").config(["$stateProvider",function($stateProvider){$stateProvider.state("employer-profile-view",{url:"/employer-profile-view",templateUrl:"modules/employer-company/views/employer-profile-view.client.view.html"}).state("company-profile-view",{url:"/company-profile-view",templateUrl:"modules/employer-company/views/company-profile-view.client.view.html"}).state("employer-profile",{url:"/employer-profile",templateUrl:"modules/employer-company/views/employer-profile.client.view.html"}).state("company-profile",{url:"/company-profile",templateUrl:"modules/employer-company/views/company-profile.client.view.html"})}]),angular.module("employer-company").controller("CompanyProfileViewController",["$scope","Industries","Authentication","Employers","Companies","$location",function($scope,Industries,Authentication,Employers,Companies,$location){$scope.user=Authentication.user,$scope.industries=Industries.getIndustries(),$scope.user||$location.path("/signin"),$scope.findOne=function(){$scope.employer=Employers.get({employerId:$scope.user.employer},function(employer){$scope.company=Companies.get({companyId:employer.company})})}}]),angular.module("employer-company").controller("CompanyProfileController",["$scope","$http","Industries","Authentication","Employers","Companies","$location","$modal",function($scope,$http,Industries,Authentication,Employers,Companies,$location,$modal){$scope.user=Authentication.user,$scope.industries=Industries.getIndustries(),$scope.user||$location.path("/signin"),$scope.findOne=function(){$scope.employer=Employers.get({employerId:$scope.user.employer},function(employer){$scope.company=Companies.get({companyId:employer.company})})},$scope.addSpeciality=function(){$scope.company.specialties.push({name:""})},$scope.removeSpeciality=function(index){$scope.company.specialties.splice(index,1)},$scope.update=function(){var company=$scope.company;company.$update(function(){$location.path("company-profile-view")},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.openPictureModal=function(){var modalInstance;modalInstance=$modal.open({templateUrl:"/modules/employer-company/views/logo/logo-partial.html",controller:"CompPictureModalCtrl"}),modalInstance.result.then(function(result){$scope.company.logo_url=result.logo_url},function(){})}}]).controller("CompPictureModalCtrl",["$scope","$modalInstance","$upload",function($scope,$modalInstance,$upload){var convert=function(dataURI,mimetype){for(var BASE64_MARKER=";base64,",base64Index=dataURI.indexOf(BASE64_MARKER)+BASE64_MARKER.length,base64=dataURI.substring(base64Index),raw=window.atob(base64),rawLength=raw.length,uInt8Array=new Uint8Array(rawLength),i=0;rawLength>i;++i)uInt8Array[i]=raw.charCodeAt(i);var bb=new Blob([uInt8Array.buffer],{type:mimetype});return bb};$scope.upload=function(image){$scope.formData=convert(image.dataURL,image.type),$scope.upload=$upload.upload({url:"/uploadCompPicture",method:"POST",headers:{"Content-Type":"undefined"},data:{myObj:$scope.myModelObj},file:$scope.formData}).progress(function(evt){console.log("percent: "+parseInt(100*evt.loaded/evt.total))}).success(function(data){$scope.response=data,console.log(data),$modalInstance.close({logo_url:data})})},$scope.ok=function(action){$modalInstance.close({action:action,logo_url:$scope.logo_url})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]),angular.module("employer-company").controller("EmployerProfileViewController",["$scope","Countries","Authentication","Employers","$location",function($scope,Countries,Authentication,Employers,$location){$scope.user=Authentication.user,$scope.countries=Countries.getCountries(),$scope.user||$location.path("/signin"),$scope.findOne=function(){$scope.employer=Employers.get({employerId:$scope.user.employer})}}]),angular.module("employer-company").controller("EmployerProfileController",["$scope","$http","Countries","Authentication","Employers","$location","$modal",function($scope,$http,Countries,Authentication,Employers,$location,$modal){$scope.user=Authentication.user,$scope.countries=Countries.getCountries(),$scope.isEditing=!1,$scope.user||$location.path("/signin"),$scope.findOne=function(){$scope.employer=Employers.get({employerId:$scope.user.employer})},$scope.update=function(){var employer=$scope.employer;employer.$update(function(){$location.path("employer-profile-view")},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.openPictureModal=function(){var modalInstance;modalInstance=$modal.open({templateUrl:"/modules/employer-company/views/picture-partial.html",controller:"EmpPictureModalCtrl"}),modalInstance.result.then(function(result){$scope["this"].user.picture_url=result.picture_url},function(){})}}]).controller("EmpPictureModalCtrl",["$scope","$modalInstance","$upload",function($scope,$modalInstance,$upload){var convert=function(dataURI,mimetype){for(var BASE64_MARKER=";base64,",base64Index=dataURI.indexOf(BASE64_MARKER)+BASE64_MARKER.length,base64=dataURI.substring(base64Index),raw=window.atob(base64),rawLength=raw.length,uInt8Array=new Uint8Array(rawLength),i=0;rawLength>i;++i)uInt8Array[i]=raw.charCodeAt(i);var bb=new Blob([uInt8Array.buffer],{type:mimetype});return bb};$scope.upload=function(image){$scope.formData=convert(image.dataURL,image.type),$scope.upload=$upload.upload({url:"/uploadEmpPicture",method:"POST",headers:{"Content-Type":"undefined"},data:{myObj:$scope.myModelObj},file:$scope.formData}).progress(function(evt){console.log("percent: "+parseInt(100*evt.loaded/evt.total))}).success(function(data){$scope.response=data,console.log(data),$modalInstance.close({picture_url:data})})},$scope.ok=function(action){$modalInstance.close({action:action,picture_url:$scope.picture_url})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]),angular.module("employer-signup-wizard").config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("signup-email-activation",{url:"/signup-email-activation",templateUrl:"modules/employer-signup-wizard/views/signup-email-activation.client.view.html"}).state("emp-wizard-two",{url:"/emp-wizard-two",templateUrl:"modules/employer-signup-wizard/views/emp-wizard-two.client.view.html"}).state("emp-wizard-one",{url:"/emp-wizard-one/:tokenId",templateUrl:"modules/employer-signup-wizard/views/emp-wizard-one.client.view.html"})}]),angular.module("employer-signup-wizard").controller("EmpSignupController",["$modalInstance","$scope","$modal","$location","$http",function($modalInstance,$scope,$modal,$location,$http){$scope.credentials={},$scope.signupemployer=function(){$scope.credentials.userType="employer",$http.post("/empsignupwizard/signupemployer",$scope.credentials).success(function(response){response.status&&($location.path("/signup-email-activation"),$modalInstance.dismiss())}).error(function(response){$scope.error=response.message})}}]),angular.module("employer-signup-wizard").controller("EmpWizardOneController",["$scope","$http","Industries","Countries","$rootScope","geolocation","$stateParams","$state","Authentication","$modal",function($scope,$http,Industries,Countries,$rootScope,geolocation,$stateParams,$state,Authentication,$modal){var city1="",country1="",gotcompanycountryundefined=!1;$scope.gotCompanyFromDB=!1,$scope.user=Authentication.user;var lat=0,lng=0;$rootScope.coords={},$scope.company={website:"",coordinates:{longitude:0,latitude:0}},$scope.employer={},$scope.company.specialities=[],$rootScope.coords={},$scope.newSpeciality={name:""},$scope.employer.role="Admin",$scope.user={},$scope.LoadInitialData=function(){$stateParams.tokenId?($http.post("/validateTokenEmployer",{token:$stateParams.tokenId}).success(function(response){$scope.user=response.user,console.log(response.user+" "+response.company),null!=response.company&&($scope.company=response.company,$scope.gotCompanyFromDB=!0),console.log(response),"nothing"==$scope.user.user?$state.go("home"):($scope.authentication=Authentication,$scope.authentication.user=response.user,$scope.gotCompanyFromDB||$scope.company.specialities.push({name:"Product Development"}),$scope.industries=Industries.getIndustries(),Countries.getCountries(function(countries){$scope.countries=countries,$scope.gotCompanyFromDB?void 0!==$scope.company.country?(gotcompanycountryundefined=!0,angular.forEach($scope.countries,function(country){country1=$scope.company.country,country1==country.name&&($scope.company.country=country,$scope.getCountryCities())})):($scope.company.country=$scope.countries[1],$scope.getCountryCities(),InitlocationData()):($scope.company.country=$scope.countries[1],$scope.getCountryCities())}),$scope.company.industry=$scope.industries[0].name,$scope.company.company_size="1 - 10",$scope.company.company_type="Sole Proprietorship",$scope.gotCompanyFromDB||InitlocationData())}).error(function(response){$scope.error=response.message}),console.log($stateParams.tokenId)):$state.go("home")};var InitlocationData=function(){var geocoder=new google.maps.Geocoder;geolocation.getLocation().then(function(data){lat=parseFloat(data.coords.latitude),lng=parseFloat(data.coords.longitude),$scope.company.coordinates.longitude=lng,$scope.company.coordinates.latitude=lat;var latlng=new google.maps.LatLng(lat,lng);geocoder.geocode({latLng:latlng},function(results,status){if(status==google.maps.GeocoderStatus.OK)if(results[1]){var citycountry=results[1].formatted_address,res=citycountry.split(",");country1=res[res.length-1],city1=res[res.length-2],city1=city1.trim(),country1=country1.trim(),console.log(country1+" "+city1),angular.forEach($scope.countries,function(country){$scope.gotCompanyFromDB&&gotcompanycountryundefined&&(country1=$scope.company.country),country1==country.name&&($scope.company.country=country,$scope.getCountryCities())})}else $scope.company.country=$scope.countries[0],$scope.getCountryCities();else $scope.company.country=$scope.countries[0],$scope.getCountryCities()})})};$scope.getCountryCities=function(){var foundit=!1;$http.get("/countries/"+$scope.company.country.name).success(function(response){$scope.cities=response.cities,angular.forEach($scope.cities,function(city){console.log(city.name+" "+city1),$scope.gotCompanyFromDB&&gotcompanycountryundefined&&(city1=$scope.company.city),city.name==city1&&(console.log(city),$scope.company.city=city,foundit=!0)}),foundit||($scope.company.city=$scope.cities[0])})},$scope.SaveAndRedirect=function(){$scope.success=$scope.error=null,$http.post("/SaveEmpSignUpWizardOneData",{user:$scope.user,company:$scope.company,employer:$scope.employer}).success(function(){$state.go("emp-wizard-two")}).error(function(response){$scope.error=response.message})},$scope.addSpeciality=function(){""!=$scope.newSpeciality.name&&($scope.company.specialities.push($scope.newSpeciality),$scope.newSpeciality={name:""})},$scope.removeSpeciality=function(index){$scope.company.specialities.splice(index,1)},$scope.openEmpPictureModal=function(){var modalInstance;modalInstance=$modal.open({templateUrl:"/modules/employer-company/views/picture-partial.html",controller:"EmpPictureModalCtrl"}),modalInstance.result.then(function(result){$scope.user.picture_url=result.picture_url},function(){})},$scope.openCompPictureModal=function(){var modalInstance;modalInstance=$modal.open({templateUrl:"/modules/employer-company/views/logo/logo-partial.html",controller:"CompPictureModalCtrl"}),modalInstance.result.then(function(result){$scope.company.logo_url=result.logo_url},function(){})}}]).controller("EmpPictureModalCtrl",["$scope","$modalInstance","$upload",function($scope,$modalInstance,$upload){var convert=function(dataURI,mimetype){for(var BASE64_MARKER=";base64,",base64Index=dataURI.indexOf(BASE64_MARKER)+BASE64_MARKER.length,base64=dataURI.substring(base64Index),raw=window.atob(base64),rawLength=raw.length,uInt8Array=new Uint8Array(rawLength),i=0;rawLength>i;++i)uInt8Array[i]=raw.charCodeAt(i);var bb=new Blob([uInt8Array.buffer],{type:mimetype});return bb};$scope.upload=function(image){$scope.formData=convert(image.dataURL,image.type),$scope.upload=$upload.upload({url:"/uploadEmpPicture",method:"POST",headers:{"Content-Type":"undefined"},data:{myObj:$scope.myModelObj},file:$scope.formData}).progress(function(evt){console.log("percent: "+parseInt(100*evt.loaded/evt.total))}).success(function(data){$scope.response=data,console.log(data),$modalInstance.close({picture_url:data})})},$scope.ok=function(action){$modalInstance.close({action:action,picture_url:$scope.picture_url})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]).controller("CompPictureModalCtrl",["$scope","$modalInstance","$upload",function($scope,$modalInstance,$upload){var convert=function(dataURI,mimetype){for(var BASE64_MARKER=";base64,",base64Index=dataURI.indexOf(BASE64_MARKER)+BASE64_MARKER.length,base64=dataURI.substring(base64Index),raw=window.atob(base64),rawLength=raw.length,uInt8Array=new Uint8Array(rawLength),i=0;rawLength>i;++i)uInt8Array[i]=raw.charCodeAt(i);var bb=new Blob([uInt8Array.buffer],{type:mimetype});return bb};$scope.upload=function(image){console.log(image),$scope.formData=convert(image.dataURL,image.type),$scope.upload=$upload.upload({url:"/uploadCompPicture",method:"POST",headers:{"Content-Type":"undefined"},data:{myObj:$scope.myModelObj},file:$scope.formData}).progress(function(evt){console.log("percent: "+parseInt(100*evt.loaded/evt.total))}).success(function(data){$scope.response=data,console.log(data),$modalInstance.close({logo_url:data})})},$scope.ok=function(action){$modalInstance.close({action:action,logo_url:$scope.logo_url})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]),angular.module("employer-signup-wizard").controller("EmpWizardTwoController",["$scope","Users","Employers","$interval","Authentication","$state","$http","$location","$rootScope","locationVarification",function($scope,Users,Employers,$interval,Authentication,$state,$http,$location,$rootScope,locationVarification){$scope.authentication=Authentication;$scope.authentication.user||$state.go("home"),$scope.latitude=0,$scope.longitude=0,$scope.myValue=!0;var marker,geocoder=new google.maps.Geocoder;$scope.SaveAndRedirect=function(){console.log(marker.position.D),$http.post("/savelatlong",{user:$scope.authentication.user,latitude:marker.position.k,longitude:marker.position.D}).success(function(response){console.log(response),$scope.employer=Employers.get({employerId:response},function(employer){console.log(employer),$location.path(employer.jobs.length>0?"emp-job-post-one-edit/"+employer.jobs[0]:"emp-job-post-one")})})},$scope.SkipAndRedirect=function(){var user=new Users($scope.authentication.user);"CompanyLocation"==user.stage&&(user.stage="NoJobs"),user.$update(function(response){$scope.success=!0,Authentication.user=response,$location.path("emp-job-post-one/")},function(response){$scope.error=response.data.message})},$scope.Back=function(){$location.path("emp-wizard-one/"+$scope.authentication.user.activeToken)},$scope.LoadInitialData=function(){$http.post("/getCountryCity",{user:$scope.authentication.user}).success(function(response){locationVarification.validateLocation(response.city,response.country,response.latitude,response.longitude).then(function(responseFromLocationFactory){"true"==responseFromLocationFactory[0]?geocoder.geocode({address:response.city+","+response.country},function(results,status){if(status==google.maps.GeocoderStatus.OK){var map=$scope.map;map.center=results[0].geometry.location,$scope.map.setCenter(results[0].geometry.location),marker=new google.maps.Marker({position:new google.maps.LatLng(response.latitude,response.longitude),map:map,draggable:!0,animation:google.maps.Animation.DROP,title:"Select your company Location!"})}else alert("Geocode was not successful for the following reason: "+status)}):geocoder.geocode({address:response.city+","+response.country},function(results,status){if(status==google.maps.GeocoderStatus.OK){console.log(results[0].geometry.location.lat()),$scope.latitude=results[0].geometry.location.lat(),$scope.longitude=results[0].geometry.location.lng();var map=$scope.map;map.center=results[0].geometry.location,$scope.map.setCenter(results[0].geometry.location),marker=new google.maps.Marker({position:new google.maps.LatLng($scope.latitude,$scope.longitude),map:map,draggable:!0,animation:google.maps.Animation.DROP,title:"Select your company Location!"})}else alert("Geocode was not successful for the following reason: "+status)})})})}}]),angular.module("employer-signup-wizard").controller("SignupEmailActivationController",["$scope",function(){}]),angular.module("employer-signup-wizard").factory("locationVarification",["$rootScope","geolocation","$q",function($rootScope,geolocation,$q){return{validateLocation:function(city,country,lat,lng){var deferred=$q.defer();if(0!=lat){var geocoder=new google.maps.Geocoder,latlng=new google.maps.LatLng(lat,lng);return geocoder.geocode({latLng:latlng},function(results,status){if(status==google.maps.GeocoderStatus.OK&&results[1]){var citycountry=results[1].formatted_address,res=citycountry.split(","),countryFromDB=res[res.length-1].trim(),cityFromDB=res[res.length-2].trim();console.log(cityFromDB+" "+countryFromDB),deferred.resolve(countryFromDB==country&&cityFromDB==city?["true"]:["false"])}}),deferred.promise}}}}]),angular.module("employers").run(["Menus",function(Menus){Menus.addMenuItem("topbar","Employers","employers","dropdown","/employers(/create)?"),Menus.addSubMenuItem("topbar","employers","List Employers","employers"),Menus.addSubMenuItem("topbar","employers","New Employer","employers/create")}]),angular.module("employers").config(["$stateProvider",function($stateProvider){$stateProvider.state("listEmployers",{url:"/employers",templateUrl:"modules/employers/views/list-employers.client.view.html"}).state("createEmployer",{url:"/employers/create",templateUrl:"modules/employers/views/create-employer.client.view.html"}).state("viewEmployer",{url:"/employers/:employerId",templateUrl:"modules/employers/views/view-employer.client.view.html"}).state("editEmployer",{url:"/employers/:employerId/edit",templateUrl:"modules/employers/views/edit-employer.client.view.html"})}]),angular.module("employers").controller("EmployersController",["$scope","$stateParams","$location","Authentication","Employers",function($scope,$stateParams,$location,Authentication,Employers){$scope.authentication=Authentication,$scope.create=function(){var employer=new Employers({name:this.name});employer.$save(function(response){$location.path("employers/"+response._id)},function(errorResponse){$scope.error=errorResponse.data.message}),this.name=""},$scope.remove=function(employer){if(employer){employer.$remove();for(var i in $scope.employers)$scope.employers[i]===employer&&$scope.employers.splice(i,1)}else $scope.employer.$remove(function(){$location.path("employers")})},$scope.update=function(){var employer=$scope.employer;employer.$update(function(){$location.path("employers/"+employer._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.employers=Employers.query()},$scope.findOne=function(){$scope.employer=Employers.get({employerId:$stateParams.employerId})}}]),angular.module("employers").factory("Employers",["$resource",function($resource){return $resource("employers/:employerId",{employerId:"@_id"},{update:{method:"PUT"}})}]),angular.module("empoyer-jobs").config(["$stateProvider",function($stateProvider){$stateProvider.state("expired-jobs",{url:"/expired-jobs",templateUrl:"modules/empoyer-jobs/views/expired-jobs.client.view.html"}).state("draft-jobs",{url:"/draft-jobs",templateUrl:"modules/empoyer-jobs/views/draft-jobs.client.view.html"}).state("emp-job-post-three",{url:"/emp-job-post-three",templateUrl:"modules/empoyer-jobs/views/emp-job-post-three.client.view.html"}).state("emp-job-post-two",{url:"/emp-job-post-two/:jobId",templateUrl:"modules/empoyer-jobs/views/emp-job-post-two.client.view.html"}).state("emp-job-post-one",{url:"/emp-job-post-one",templateUrl:"modules/empoyer-jobs/views/emp-job-post-one.client.view.html"}).state("emp-job-post-one-edit",{url:"/emp-job-post-one-edit/:jobId",templateUrl:"modules/empoyer-jobs/views/emp-job-post-one.edit.client.view.html"}).state("employer-job-candidates",{url:"/employer-job-candidates/:jobId",templateUrl:"modules/empoyer-jobs/views/employer-job-candidates.client.view.html"}).state("company-open-jobs",{url:"/company-open-jobs",templateUrl:"modules/empoyer-jobs/views/company-open-jobs.client.view.html"}).state("post-job",{url:"/post-job",templateUrl:"modules/empoyer-jobs/views/post-job.client.view.html"})}]),angular.module("empoyer-jobs").controller("CompanyOpenJobsController",["$scope","Authentication","Jobs","Employers","Companies","$location","Socket",function($scope,Authentication,Jobs,Employers,Companies,$location,Socket){$scope.user=Authentication.user,$scope.user||$location.path("/signin"),$scope.jobs=[],$scope.employer=Employers.get({employerId:$scope.user.employer},function(employer){$scope.company=Companies.get({companyId:employer.company},function(company){angular.forEach(company.jobs,function(job){Jobs.get({jobId:job},function(job){"Active"==job.stage&&new Date(job.due_date)>Date.now()&&$scope.jobs.push(job)})})})}),Socket.on("applied_on_job",function(data){for(var d=0,h=$scope.jobs.length;h>d;d++)if($scope.jobs[d]._id==data.job._id){$scope.jobs[d]=data.job;break}})}]),angular.module("empoyer-jobs").controller("DraftJobsController",["$scope","Authentication","Jobs","Employers","Companies","$location","Socket",function($scope,Authentication,Jobs,Employers,Companies,$location,Socket){$scope.user=Authentication.user,$scope.user||$location.path("/signin"),$scope.jobs=[],$scope.employer=Employers.get({employerId:$scope.user.employer},function(employer){$scope.company=Companies.get({companyId:employer.company},function(company){angular.forEach(company.jobs,function(job){Jobs.get({jobId:job},function(job){"Active"!=job.stage&&$scope.jobs.push(job)})})})}),Socket.on("applied_on_job",function(data){for(var d=0,h=$scope.jobs.length;h>d;d++)if($scope.jobs[d]._id==data.job._id){$scope.jobs[d]=data.job;break}})}]),angular.module("empoyer-jobs").controller("EmpJobPostOneController",["$scope","$http","$location","Jobs","$stateParams","Authentication","$state","Countries","locationVarification",function($scope,$http,$location,Jobs,$stateParams,Authentication,$state,Countries){$scope.country={},$scope.city={},$scope.user=Authentication.user,$scope.user||$state.go("home"),$scope.job={},$scope.job.industry={},$scope.job.coordinates={},$scope.initialize=function(){$stateParams.jobId?findOne():LoadDefaultData()};var LoadDefaultData=function(){$http.post("/getCompanyByUserId",{id:$scope.user._id}).success(function(response){console.log(response),$scope.job.employee_type="Contract",$scope.job.employee_status="Full Time",$scope.job.shift="Morning",$scope.job.no_of_positions="1",$scope.job.travel_required="No Travelling",$scope.job.visa_status="Citizen",$scope.job.salary_range="Less than $1000",$scope.job.country=response.country,$scope.job.city=response.city,$scope.job.coordinates.latitude=response.latitude,$scope.job.coordinates.longitude=response.longitude,getCountry(),getIndustry()})};$scope.getCountryCities=function(){var city1,foundit=!1;$http.get("/countries/"+$scope.country.name).success(function(response){$scope.cities=response.cities,angular.forEach($scope.cities,function(city){city1=$scope.job.city,city.name==city1&&(console.log(city),$scope.city=city,foundit=!0)}),foundit||($scope.city=$scope.cities[0])})};var getCountry=function(){var country1,foundit=!1;Countries.getCountries(function(countries){$scope.countries=countries,angular.forEach($scope.countries,function(cunt){country1=$scope.job.country,console.log(country1+"DSF"),country1==cunt.name&&(foundit=!0,$scope.country=cunt,$scope.getCountryCities())}),foundit||($scope.country=$scope.countries[0],$scope.getCountryCities())})},getIndustry=function(){$http.get("/industries").success(function(response){$scope.industries=response,$scope.job.industry=$scope.industries[0],$scope.getIndustryJobRoles()})};$scope.getIndustryJobRoles=function(){$http.get("/industries/"+$scope.job.industry.name).success(function(response){$scope.job_roles=response.job_roles,$scope.job.job_role=$scope.job_roles[0],$scope.job.title=$scope.job.job_role.name,$scope.job.responsibilities=$scope.job.job_role.responsibilities,$scope.job.educations=$scope.job.job_role.educations,$scope.job.qualifications=$scope.job.job_role.qualifications,$scope.job.skills=$scope.job.job_role.skills})},$scope.bindJobRoles=function(jobRole){$scope.job.title=jobRole.name,$scope.job.responsibilities=jobRole.responsibilities,$scope.job.educations=jobRole.educations,$scope.job.qualifications=jobRole.qualifications,$scope.job.skills=jobRole.skills};var findOne=function(){$http.get("/industries").success(function(response){$scope.industries=response,Jobs.get({jobId:$stateParams.jobId},function(job){$scope.job=job,console.log($scope.job),getCountry(),$scope.job.due_date=new Date($scope.job.due_date),$http.get("/industries/"+$scope.job.industry).success(function(response){$scope.job_roles=response.job_roles,angular.forEach($scope.industries,function(industry){industry.name===$scope.job.industry&&($scope.job.industry=industry)}),angular.forEach($scope.job_roles,function(job_role){job_role._id==$scope.job.job_role&&($scope.job.job_role=job_role)})})})})};$scope.SaveAndRedirect=function(){if($scope.success=$scope.error=null,$scope.job.country=$scope.country.name,$scope.job.city=$scope.city.name,$scope.job.industry=$scope.job.industry.name,$scope.job.job_role=$scope.job.job_role._id,"JobOne"==$scope.job.stage&&($scope.job.stage="JobTwo"),$stateParams.jobId){var job=$scope.job;job.company=job.company._id,job.$update(function(){$location.path("emp-job-post-two/"+job._id)},function(errorResponse){$scope.error=errorResponse.data.message})}else $http.post("/SaveEmpJobPostOneData",$scope.job).success(function(response){$location.path("emp-job-post-two/"+response._id)}).error(function(response){$scope.error=response.message})}}]),angular.module("empoyer-jobs").controller("EmpJobPostThreeController",["$scope",function(){}]),angular.module("empoyer-jobs").controller("EmpJobPostTwoController",["$scope","$http","Jobs","Users","$stateParams","$location","Employers","Authentication",function($scope,$http,Jobs,Users,$stateParams,$location,Employers,Authentication){$scope.job={},$scope.job.responsibilities=[],$scope.job.qualifications=[],$scope.newResponsibility={name:""},$scope.newSkill={title:""},$scope.priorities=["Must","Important","Nice to have"],$scope.degree_titles=["High School","Associate Degree","Bachelor Degree","Master Degree","Master of Business Administration (M.B.A.)","Juris Doctor (J.D.)","Doctor of Medicine (M.D.)","Doctor of Philosophy (Ph.D.)","Engineers Degree"],$scope.newQualification={name:""},$scope.findOne=function(){$scope.job=Jobs.get({jobId:$stateParams.jobId})},$scope.addResponsibility=function(){""!=$scope.newResponsibility.name&&($scope.job.responsibilities.push($scope.newResponsibility),$scope.newResponsibility={name:""})},$scope.removeResponsibility=function(index){$scope.job.responsibilities.splice(index,1)},$scope.addQualification=function(){""!=$scope.newQualification.name&&($scope.job.qualifications.push($scope.newQualification),$scope.newQualification={name:""})},$scope.removeQualification=function(index){$scope.job.qualifications.splice(index,1)},$scope.addEducation=function(){""!=$scope.newEducation.degree_title&&($scope.job.educations.push($scope.newEducation),$scope.newEducation={name:""})},$scope.removeEducation=function(index){$scope.job.educations.splice(index,1)},$scope.addSkill=function(){""!=$scope.newSkill.title&&($scope.job.skills.push($scope.newSkill),$scope.newSkill={title:""})},$scope.removeSkill=function(index){$scope.job.skills.splice(index,1)},$scope.SaveAndRedirect=function(){$scope.success=$scope.error=null;var job=$scope.job;job.company=job.company._id,"JobOne"==job.stage&&(job.stage="Active"),job.$update(function(){Authentication.user.stage="Active",$location.path("/")
},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.GoBack=function(){$location.path("emp-job-post-one-edit/"+$stateParams.jobId)}}]),angular.module("empoyer-jobs").controller("EmployerJobCandidatesController",["$scope","$filter","Jobs","$stateParams","$http","$modal","$location","Authentication","Socket","$rootScope",function($scope,$filter,Jobs,$stateParams,$http,$modal,$location,Authentication,Socket,$rootScope){$rootScope.$broadcast("inEmployerJobupdateHeader",{trigger:!0}),$scope.firstTimeFetching=!0,$scope.locationFilters=[],$scope.user=Authentication.user,$scope.itemsPerPage=5,$scope.currentPage=0,$scope.candidates=[],$scope.skip=0,$scope.dummyfilters=[],$scope.filters=[],$scope.filters1=[],$scope.firsttime=!0,$scope.completefilternames=[],$scope.filterLimit=5;$scope.priorities=[{Id:1,Label:"Career Level",name:"career_level",nameinjob:"career_level"},{Id:2,Label:"Salary Expectation",name:"salary_expectation",nameinjob:"salary_range"},{Id:3,Label:"Skills",name:"skills",nameinjob:"skills"},{Id:4,Label:"Education",name:"degree_title",nameinjob:"degree_title"},{Id:5,Label:"Gender",name:"gender",nameinjob:"gender"},{Id:6,Label:"Employment Status",name:"employee_status",nameinjob:"employee_status"},{Id:7,Label:"Employment Type",name:"employee_type",nameinjob:"employee_type"},{Id:8,Label:"Visa Status",name:"visa_status",nameinjob:"visa_status"}],$scope.user||$location.path("/signin"),Socket.on("applied_on_job",function(data){$scope.job._id==data.job._id&&$scope.findCandidates($scope.skip,$scope.itemsPerPage,$scope.filters,!1)}),Socket.on("WatchingJob",function(data){for(var dd=0,len=$scope.candidates.length;len>dd;dd++)if(data.userId==$scope.candidates[dd].user._id){$scope.findCandidates($scope.skip,$scope.itemsPerPage,$scope.filters,!1);break}}),$scope.itemsList={items1:[]},$scope.itemsList.items1=$scope.priorities,$scope.sortableOptions={containment:"#sortable-container",accept:function(sourceItemHandleScope,destSortableScope){return sourceItemHandleScope.itemScope.sortableScope.$id===destSortableScope.$id},orderChanged:function(){$scope.findCandidates($scope.skip,$scope.itemsPerPage,$scope.filters,!1)}},$scope.range=function(){var start,rangeSize=5,ret=[];start=$scope.currentPage,start>$scope.pageCount()-rangeSize&&(start=$scope.pageCount()-rangeSize);for(var i=start;start+rangeSize>i;i++)i>=0&&ret.push(i);return ret},$scope.prevPage=function(){$scope.currentPage>0&&$scope.currentPage--},$scope.prevPageDisabled=function(){return 0===$scope.currentPage?"disabled":""},$scope.nextPage=function(){$scope.currentPage<$scope.pageCount()-1&&$scope.currentPage++},$scope.nextPageDisabled=function(){return $scope.currentPage===$scope.pageCount()-1?"disabled":""},$scope.pageCount=function(){return Math.ceil($scope.total/$scope.itemsPerPage)},$scope.setPage=function(n){n>=0&&n<$scope.pageCount()&&($scope.currentPage=n)},$scope.isShortListed=function(candidate){var ans=!1;return angular.forEach($scope.job.shortListedCandidates,function(item){item.candidate==candidate._id&&(ans=!0)}),ans},$scope.findCandidates=function(skip,limit,filters,isPageChange){$http.put("jobs/getPaginatedCandidates/"+$stateParams.jobId,{skip:skip,limit:limit,filter:filters,isPageChange:isPageChange,priority:$scope.itemsList.items1}).success(function(job){console.log(job),$scope.filters1=[],$scope.job=job.job,$scope.total=job.totalentries,$scope.candidates=job.candidates,job.filters.forEach(function(entry){$scope.filters1.push(entry)}),$scope.firsttime&&($scope.firsttime=!1,$scope.filters1.forEach(function(entry){for(var alreadyexists=!1,h=0,a=$scope.completefilternames.length;a>h;h++)$scope.completefilternames[h]==entry.type&&(alreadyexists=!0);alreadyexists||$scope.completefilternames.push(entry.type)}))})},$scope.addCandidateToShortList=function(candidate){var attribute={jobId:$scope.job._id,candidateId:candidate._id};$http.put("jobs/addToShortList/"+$scope.job._id,attribute).success(function(){$scope.job.shortListedCandidates.push({candidate:candidate._id})}).error(function(response){$scope.error=response.message})},$scope.removeCandidateFromShortList=function(candidate){var attribute={jobId:$scope.job._id,candidateId:candidate._id};$http.put("jobs/removeFromShortList/"+$scope.job._id,attribute).success(function(){angular.forEach($scope.job.shortListedCandidates,function(item){item.candidate==candidate._id&&$scope.job.shortListedCandidates.splice($scope.job.shortListedCandidates.indexOf(item),1)}),$location.path("jobs/"+job._id)}).error(function(response){$scope.error=response.message})},$scope.$watch("currentPage",function(newValue){$scope.skip=newValue*$scope.itemsPerPage,0==$scope.skip?$scope.findCandidates($scope.skip,$scope.itemsPerPage,$scope.filters,!1):$scope.findCandidates($scope.skip,$scope.itemsPerPage,$scope.filters,!0)}),$scope.filterChanged=function(type,name){$scope.filters1.forEach(function(entry){name==entry.name&&(entry.value=!entry.value,1==entry.value?$scope.addToFilters(entry.type,entry.name):$scope.removeFromFilters(entry.type,entry.name))}),$scope.findCandidates($scope.skip,$scope.itemsPerPage,$scope.filters,!1)},$scope.addToFilters=function(type,name){var once=!0,alreadyPresentInFilters=!1;if($scope.filters.forEach(function(entry){type==entry.type&&name==entry.name&&(alreadyPresentInFilters=!0)}),!alreadyPresentInFilters){var typeExists=!1,feefilters=$scope.filters.slice();if(feefilters.forEach(function(entry){type==entry.type&&once&&(once=!1,typeExists=!0,$scope.filters.push({type:type,name:name,priority:entry.priority,value:!0}))}),!typeExists){for(var tmp,highest=0,i=$scope.filters.length-1;i>=0;i--)tmp=$scope.filters[i].priority,tmp>highest&&(highest=tmp);$scope.filters.push({type:type,name:name,priority:highest+1,value:!0})}}},$scope.removeFromFilters=function(type,name){$scope.filters.forEach(function(entry){type==entry.type&&name==entry.name&&$scope.filters.splice($scope.filters.indexOf(entry),1)}),$scope.findCandidates($scope.skip,$scope.itemsPerPage,$scope.filters,!1)},$scope.openFilterModal=function(filterArray,name){var modalInstance=$modal.open({templateUrl:"/modules/empoyer-jobs/views/employer-job-candidates/filter-modal.html",controller:"FilterModalCtrl",resolve:{filter:function(){return{values:angular.copy(filterArray),name:name}}}});modalInstance.result.then(function(filterObject){var filternames=[];filterObject.filters.forEach(function(filter){filter.value&&filternames.push(filter.name)}),filterObject.name&&filternames.forEach(function(filter){$scope.addToFilters(filterObject.name,filter)}),$scope.findCandidates($scope.skip,$scope.itemsPerPage,$scope.filters,!1)},function(){})},$scope.compareType=function(typeName,value){return $scope.job[typeName]===value?!0:!1}}]).controller("FilterModalCtrl",["$scope","$modalInstance","filter",function($scope,$modalInstance,filter){$scope.filters=filter.values,$scope.name=filter.name,$scope.ok=function(){$modalInstance.close({name:$scope.name,filters:$scope.filters})},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}]),angular.module("empoyer-jobs").controller("ExpiredJobsController",["$scope","Authentication","Jobs","Employers","Companies","$location","Socket",function($scope,Authentication,Jobs,Employers,Companies,$location,Socket){$scope.user=Authentication.user,$scope.user||$location.path("/signin"),$scope.jobs=[],$scope.employer=Employers.get({employerId:$scope.user.employer},function(employer){$scope.company=Companies.get({companyId:employer.company},function(company){angular.forEach(company.jobs,function(job){Jobs.get({jobId:job},function(job){new Date(job.due_date)<Date.now()&&$scope.jobs.push(job)})})})}),Socket.on("applied_on_job",function(data){for(var d=0,h=$scope.jobs.length;h>d;d++)if($scope.jobs[d]._id==data.job._id){$scope.jobs[d]=data.job;break}})}]);var gt=angular.module("empoyer-jobs");gt.controller("PostJobController",["$scope","Industries","Countries","Studyfields","$location","Authentication","Jobs","$rootScope",function($scope,Industries,Countries,Studyfields,$location,Authentication,Jobs,$rootScope){$scope.user=Authentication.user,$scope.user||$location.path("/signin"),$scope.industries=Industries.getIndustries(),Countries.getCountries(function(countries){$scope.countries=countries}),$scope.studyFields=Studyfields.getStudyFields(),$scope.skills=[],$scope.skills.push({title:"",level:"Beginner"}),$scope.certificates=[],$scope.certificates.push({name:""}),$scope.isTabMap=!1,$scope.create=function(){$scope.position=$scope.map.markers[0].position;var job=new Jobs({title:this.title,description:this.description,requirement:this.requirements,due_date:this.due_date,gender:this.gender,work_permit:this.work_permit,employee_type:this.employee_type,salary_range:this.salary_range,industry:this.industry,department:this.department,no_of_positions:this.no_of_positions,shift:this.shift,location:this.location,country:this.country,career_level:this.career_level,experience:this.experience,degree_title:this.degree_title,study_field:this.study_field,travel_required:this.travel_required,skills:this.skills,certificates:this.certificates,coordinates:{latitude:$scope.position.k,longitude:$scope.position.B}});job.$save(function(response){$location.path("jobs/"+response._id)},function(errorResponse){$scope.error=errorResponse.data.message}),this.name="",this.description=""},$scope.addSkill=function(){$scope.skills.push({title:"",level:"Beginner"})},$scope.removeSkill=function(index){$scope.skills.splice(index,1)},$scope.addCertificate=function(){$scope.certificates.push({name:""})},$scope.removeCertificate=function(index){$scope.certificates.splice(index,1)},$scope.bootupmapaccordingtogeolocation=function(){$scope.lat=$rootScope.coords.lat,$scope.longi=$rootScope.coords.longi,console.log($scope.lat)}}]),angular.module("empoyer-jobs").directive("filterList",["$compile",function($compile){return{template:"<div></div>",restrict:"E",link:function(scope,element,attrs){var filterName=attrs.filterName,filterNameString="'"+attrs.filterName+"'",count="'count'",filterHeading="";switch(filterName){case"gender":filterHeading="Gender";break;case"salary_expectation":filterHeading="Salary Expectation";break;case"visa_status":filterHeading="Visa";break;case"employee_status":filterHeading="Employment Status";break;case"employee_type":filterHeading="Employment Type";break;case"career_level":filterHeading="Career Level";break;case"skills":filterHeading="Skills";break;case"educations":filterHeading="Education";break;case"isOnline":filterHeading="Presence"}scope.$watch("filters1",function(v){filterName=attrs.filterName,filterNameString="'"+attrs.filterName+"'",count="'count'",scope.dummyfilters=[];for(var h=0,j=v.length;j>h;h++)filterName==v[h].type&&scope.dummyfilters.push(v[h]);var html='<article style="padding-top: 10px;"><label><strong>'+filterHeading+'</strong></label><ul class="list-unstyled m-t-n-sm"><li class="checkbox i-checks" data-ng-repeat="'+filterName+"Filter in dummyfilters | orderBy:"+count+':true  | limitTo: filterLimit"><label><input type="checkbox" data-ng-click="filterChanged('+filterNameString+","+filterName+'Filter.name)" data-ng-model="'+filterName+'Filter.value" id="{{'+filterName+" + "+filterName+'Filter.name}}" /><i></i><label ng-if="'+filterName+'Filter.name" for="{{'+filterName+" + "+filterName+'Filter.name}}" >{{'+filterName+"Filter.name}} ({{"+filterName+'Filter.count}})</label><label ng-if="!'+filterName+'Filter.name" for="{{'+filterName+" + "+filterName+'Filter.name}}" >Not Mentioned ({{'+filterName+'Filter.count}})</label></label></li></ul><a href="" data-ng-if="dummyfilters.length > filterLimit" data-ng-click="openFilterModal(dummyfilters, '+filterNameString+')">more choices...</a></article>',e=$compile(html)(scope);element.replaceWith(e)},!0)}}}]),angular.module("exams").config(["$stateProvider",function($stateProvider){$stateProvider.state("exam-result",{url:"/exam-result/:examTakenId",templateUrl:"modules/exams/views/exam-result.client.view.html"}).state("takeExam",{url:"/takeExam/:examId",templateUrl:"modules/exams/views/take-exam.client.view.html"}).state("listExams",{url:"/exams",templateUrl:"modules/exams/views/list-exams.client.view.html"}).state("createExam",{url:"/exams/create",templateUrl:"modules/exams/views/create-exam.client.view.html"}).state("viewExam",{url:"/exams/:examId",templateUrl:"modules/exams/views/view-exam.client.view.html"}).state("editExam",{url:"/exams/:examId/edit",templateUrl:"modules/exams/views/edit-exam.client.view.html"})}]),angular.module("exams").controller("ExamResultController",["$scope","$stateParams","$http",function($scope,$stateParams,$http){$scope.findOne=function(){$http.get("/examResult/"+$stateParams.examTakenId).success(function(data){$scope.examTaken=data})}}]),angular.module("exams").controller("ExamsController",["$scope","$stateParams","$location","Authentication","Exams",function($scope,$stateParams,$location,Authentication,Exams){$scope.authentication=Authentication,$scope.create=function(){var exam=new Exams({name:this.name});exam.$save(function(response){$location.path("exams/"+response._id)},function(errorResponse){$scope.error=errorResponse.data.message}),this.name=""},$scope.remove=function(exam){if(exam){exam.$remove();for(var i in $scope.exams)$scope.exams[i]===exam&&$scope.exams.splice(i,1)}else $scope.exam.$remove(function(){$location.path("exams")})},$scope.update=function(){var exam=$scope.exam;exam.$update(function(){$location.path("exams/"+exam._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.exams=Exams.query()},$scope.findOne=function(){$scope.exam=Exams.get({examId:$stateParams.examId})}}]),angular.module("exams").controller("TakeExamController",["$scope","$stateParams","Exams","$http","$location","$rootScope",function($scope,$stateParams,Exams,$http,$location,$rootScope){$rootScope.preventNavigation=!0,$scope.totalScore=0,$scope.currentScore=0,$scope.findOne=function(){Exams.get({examId:$stateParams.examId}).$promise.then(function(data){$scope.exam=data,$scope.currentQuestion=data.questions[0],$scope.questionIndex=0,$scope.timeLimit=60*$scope.exam.timeLimit,$scope.$broadcast("timer-add-cd-seconds",$scope.timeLimit-3),angular.forEach($scope.exam.questions,function(question){angular.forEach(question.answers,function(answer){$scope.totalScore+=answer.weight})})},function(){})},$scope.nextQuestion=function(){$scope.questionIndex++,$scope.currentQuestion=$scope.exam.questions[$scope.questionIndex]},$scope.prevQuestion=function(){$scope.questionIndex--,$scope.currentQuestion=$scope.exam.questions[$scope.questionIndex]},$scope.submitExam=function(){$scope.currentScore=0,angular.forEach($scope.exam.questions,function(question){angular.forEach(question.answers,function(answer){answer.body===question.selectedAnswer&&($scope.currentScore+=answer.weight)})}),$scope.percentage=$scope.currentScore/$scope.totalScore*100,$scope.isPass=$scope.percentage>$scope.exam.passScore?!0:!1;var examsTaken={score:$scope.percentage,exam:$scope.exam._id,isPass:$scope.isPass};$http.put("/exams/saveExam/"+$scope.exam._id,examsTaken).success(function(response){$location.path("exam-result/"+response._id)}).error(function(response){$scope.error=response.message})},$scope.$on("timer-stopped",function(event,data){console.log("Timer Stopped - data = ",data),$scope.submitExam()}),$scope.$on("$destroy",function(){window.onbeforeunload=void 0}),window.onbeforeunload=function(event){var message="You are about to leave this will cause the test to submit";return"undefined"==typeof event&&(event=window.event),event&&(event.returnValue=message),message},$scope.$on("$locationChangeStart",function(event){if($scope.form.$dirty){var answer=confirm("If you leave this page you are going to lose all unsaved changes, are you sure you want to leave?");answer||event.preventDefault()}})}]),angular.module("exams").factory("Exams",["$resource",function($resource){return $resource("exams/:examId",{examId:"@_id"},{update:{method:"PUT"}})}]),angular.module("jobs").run(["Menus",function(Menus){Menus.addMenuItem("topbar","Jobs","jobs","dropdown","/jobs(/create)?"),Menus.addSubMenuItem("topbar","jobs","List Jobs","jobs"),Menus.addSubMenuItem("topbar","jobs","New Job","jobs/create")}]),angular.module("jobs").config(["$stateProvider",function($stateProvider){$stateProvider.state("listJobs",{url:"/jobs",templateUrl:"modules/jobs/views/list-jobs.client.view.html"}).state("createJob",{url:"/jobs/create",templateUrl:"modules/jobs/views/create-job.client.view.html"}).state("viewJob",{url:"/jobs/:jobId",templateUrl:"modules/jobs/views/view-job.client.view.html"}).state("editJob",{url:"/jobs/:jobId/edit",templateUrl:"modules/jobs/views/edit-job.client.view.html"})}]),angular.module("jobs").controller("JobsController",["$http","$scope","$stateParams","$location","Authentication","Candidates","Jobs",function($http,$scope,$stateParams,$location,Authentication,Candidates,Jobs){$scope.authentication=Authentication,$scope.user=Authentication.user,$scope.user||$location.path("/signin"),$scope.create=function(){var job=new Jobs({title:this.title});job.$save(function(response){$location.path("jobs/"+response._id)},function(errorResponse){$scope.error=errorResponse.data.message}),this.name=""},$scope.remove=function(job){if(job){job.$remove();for(var i in $scope.jobs)$scope.jobs[i]===job&&$scope.jobs.splice(i,1)}else $scope.job.$remove(function(){$location.path("jobs")})},$scope.update=function(){var job=$scope.job;job.$update(function(){$location.path("jobs/"+job._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.apply=function(job){$http.put("jobs/apply/"+job._id,job).success(function(){$location.path("jobs/"+job._id)}).error(function(response){$scope.error=response.message})},$scope.find=function(){$scope.jobs=Jobs.query()},$scope.findOne=function(){$scope.job=Jobs.get({jobId:$stateParams.jobId},function(){$scope.candidate=Candidates.get({candidateId:$scope.user.candidate},function(){"candidate"===$scope.user.userType&&$scope.candidate.jobs.indexOf($scope.job._id)>1&&($scope.isApplied=!0)})}),$http.put("jobs/onePlusView/"+$stateParams.jobId,{user:$scope.user}).success(function(){}).error(function(response){$scope.error=response.message})}}]),angular.module("jobs").factory("Jobs",["$resource",function($resource){return $resource("jobs/:jobId",{jobId:"@_id"},{update:{method:"PUT"}})}]),angular.module("messages").config(["$stateProvider",function($stateProvider){$stateProvider.state("list-user-messages",{url:"/list-user-messages",templateUrl:"modules/messages/views/list-user-messages.client.view.html"}).state("list-user-messages.inboxs",{url:"/inboxs/:threadId",templateUrl:"modules/messages/views/inbox.client.view.html"}).state("create-message",{url:"/create-message",templateUrl:"modules/messages/views/create-message.client.view.html"})}]),angular.module("messages").controller("ListUserMessagesController",["$scope","Authentication","$location",function($scope,Authentication,$location){$scope.user=Authentication.user,$scope.user||$location.path("/signin")}]),angular.module("messages").controller("MessagesController",["$scope","$stateParams","$location","Authentication","Messages","$http","Socket",function($scope,$stateParams,$location,Authentication,Messages,$http,Socket){$scope.authentication=Authentication,$scope.threads=[],$scope.message={},$scope.thread,$scope.balsamic={},$scope.message.messages=[],$scope.displayNameOfReceiver,$scope.nomessages=!1,$scope.unreadthreads=0,console.log($stateParams.threadId),$scope.listThreads=function(){$http.get("/getAllMessagesWithFlagForUnread/"+$scope.authentication.user._id).success(function(res){$scope.threads=res,console.log(res);for(var s=0,len=$scope.threads.length;len>s;s++)$scope.threads[s].receiver==$scope.authentication.user._id&&($scope.threads[s].readByReceiver||$scope.unreadthreads++),$scope.threads[s].sender==$scope.authentication.user._id&&($scope.threads[s].readBySender||$scope.unreadthreads++);for(var s=0,len=$scope.threads.length;len>s;s++)if("main"!=$stateParams.threadId&&$stateParams.threadId==$scope.threads[s]._id){$scope.selectedmessage($scope.threads[s]);break}"main"==$stateParams.threadId&&$scope.threads.length>=1&&$scope.selectedmessage($scope.threads[0]),"main"==$stateParams.threadId&&0==$scope.threads.length&&($scope.nomessages=!0)})},$scope.selectedmessage=function(message){$scope.thread=message,$scope.displayNameOfReceiver="",$scope.messages=message.messages,console.log($scope.messages);for(var x=0,len=$scope.messages.length;len>x;x++)if($scope.messages[x].author._id!=$scope.authentication.user._id){$scope.displayNameOfReceiver=$scope.messages[x].author.displayName;break}$scope.findOneAndMarkAsRead(),$stateParams.threadId=$scope.thread._id},$scope.create=function(){var message=new Messages({name:this.name});message.$save(function(response){$location.path("messages/"+response._id)},function(errorResponse){$scope.error=errorResponse.data.message}),this.name=""},$scope.remove=function(message){if(message){message.$remove();for(var i in $scope.messages)$scope.messages[i]===message&&$scope.messages.splice(i,1)}else $scope.message.$remove(function(){$location.path("messages")})},$scope.update=function(){var message=$scope.message;message.$update(function(){$location.path("messages/"+message._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.messages=Messages.query()},$scope.findOne=function(){$scope.message=Messages.get({messageId:$stateParams.messageId})},$scope.sendMessage=function(){var threadId=$scope.thread._id,message={threadId:$scope.thread._id,messageBody:$scope.balsamic.message,author:$scope.authentication.user};if($scope.authentication.user._id==$scope.thread.sender._id){var thread={idc:threadId,sender:{displayName:$scope.authentication.user.displayName},receiver:$scope.thread.receiver._id,messages:{created:Date.now()}};Socket.emit("message_sent_from",{message:thread})}else{var thread={idc:threadId,sender:{displayName:$scope.authentication.user.displayName},receiver:$scope.thread.sender._id,messages:[{created:Date.now()}]};Socket.emit("message_sent_from",{message:thread})}$http.put("/threads/updateThread/"+$scope.thread._id,message).success(function(messageBody){console.log(messageBody),Socket.emit("update_threads",{sender:messageBody.sender,receiver:messageBody.receiver,threadId:$scope.thread._id,messageBody:$scope.balsamic.message,author:$scope.authentication.user,authordp:$scope.authentication.user.picture_url,created:Date.now()})})},Socket.on("i_am_here",function(data){for(var x=0,b=$scope.thread.messages.length;b>x;x++)$scope.thread.messages[x].author._id===data.userId&&($scope.thread.messages[x].author.isOnline="Online"==data.isOnline?!0:!1),$scope.thread.messages[x].author.authorid==data.userId&&($scope.thread.messages[x].author.isOnline="Online"==data.isOnline?!0:!1)}),Socket.on("incoming_thread",function(data){$scope.balsamic.message="",$scope.newMessage={messageBody:data.messageBody,author:{_id:data.id,displayName:data.author,picture_url:data.authordp,isOnline:"Online"},created:data.created},$scope.unreadthreads++;for(var x=0,len=$scope.threads.length;len>x;x++)if($scope.threads[x]._id==data.threadId){$scope.threads[x].messages.unshift($scope.newMessage);break}}),$scope.sortMessage=function(message){var date=new Date(message.created);return date},$scope.findOneAndMarkAsRead=function(){$http.put("/threads/getUserThread/"+$scope.thread._id,{id:$scope.authentication.user._id}).success(function(thread){$scope.thread=thread.thread,thread.alreadyRead||0==$scope.unreadthreads||$scope.unreadthreads--,thread.thread.sender._id===$scope.authentication.user._id?$http.put("/users/addSubscriber/"+$scope.authentication.user._id,{id:thread.thread.receiver._id}).success(function(){}):$http.put("/users/addSubscriber/"+$scope.authentication.user._id,{id:thread.thread.sender._id}).success(function(){}),Socket.emit("watched_thread",$scope.authentication.user._id)})}}]),angular.module("messages").factory("Messages",["$resource",function($resource){return $resource("messages/:messageId",{messageId:"@_id"},{update:{method:"PUT"}})}]),angular.module("short-list").config(["$stateProvider",function($stateProvider){$stateProvider.state("shortlisted-candidates-skeleton",{url:"/shortlisted-candidates-skeleton",templateUrl:"modules/core/views/shortlisted-candidates-skeleton.client.view.html"}).state("shortlisted-candidates",{url:"/shortlisted-candidates/:jobId",templateUrl:"modules/short-list/views/shortlisted-candidates.client.view.html",controller:"ShortlistedCandidatesController"}).state("shortlisted-candidates-test",{url:"/test",templateUrl:"modules/short-list/views/shortlisted-candidates-test.client.view.html",controller:"CandidatesTestController"})}]),angular.module("short-list").controller("CandidatesTestController",["$scope","$http","$stateParams","$modal","$rootScope","Exams","Authentication",function($scope,$http,$stateParams,$modal,$rootScope,Exams,Authentication){$scope.user=Authentication.user,$scope.find=function(){$scope.tests=Exams.query()},$scope.sendTest=function(){var tests=[];angular.forEach($scope.tests,function(test){console.log(test),test.selected&&tests.push(test._id)});var candidates=$rootScope.selectedCandidates;console.log(candidates),$http.put("/exams/sendTest/"+$scope.user._id,{candidates:candidates,tests:tests}).success(function(response){console.log(response),"none have given test"==response.data&&alert("None have given the test "),"already given test"==response.data&&alert("well it looks like someone has given the test already")}).error(function(){})}}]),angular.module("short-list").controller("messageController",["$scope","Socket","$modalInstance","$http","reciever","Threads","Authentication",function($scope,Socket,$modalInstance,$http,reciever,Threads,Authentication){$scope.authentication=Authentication,$scope.user=Authentication.user,$scope.ok=function(){$modalInstance.close()},$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.recieverId=reciever._id,$scope.reciever=reciever,$scope.sendMessage=function(message){var thread=new Threads({sender:$scope.user._id,receiver:$scope.reciever.user,subject:message.subject,readBySender:!0,messages:[{messageBody:message.messageBody,author:$scope.user._id,created:Date.now()}]});thread.$save(function(response){console.log(response.receiver);var thread1={idc:response._id,receiver:response.receiver,sender:{displayName:$scope.user.displayName},messages:{created:Date.now()}};console.log(Date.now()),Socket.emit("message_sent_from",{message:thread1}),$modalInstance.dismiss("cancel")},function(errorResponse){$scope.error=errorResponse.data.message})}}]),angular.module("short-list").controller("ShortlistedCandidatesController",["$scope","$http","$stateParams","$modal","$rootScope",function($scope,$http,$stateParams,$modal,$rootScope){$rootScope.selectedCandidates=[],$scope.formData={userType:""},$http.get("jobs/shortListedCandidates/"+$stateParams.jobId).success(function(job){$scope.job=job,$scope.shortListedObjects=job.shortListedCandidates}),$scope.$on("$destroy",function(){for(var d=0,s=$scope.shortListedObjects.length;s>d;d++){var f=$scope.shortListedObjects[d];console.log(f.selected),f.selected&&($rootScope.selectedCandidates.push($scope.shortListedObjects[d].candidate._id),console.log("WTF"))}}),$scope.removeCandidateFromShortList=function(candidate){var attribute={jobId:$scope.job._id,candidateId:candidate._id};$http.put("jobs/removeFromShortList/"+$scope.job._id,attribute).success(function(){}).error(function(response){$scope.error=response.message})},$scope.openMessageModal=function(reciever){var mesg=$modal.open({templateUrl:"/modules/short-list/views/message/message.html",controller:"messageController",resolve:{reciever:function(){return reciever}}});mesg.result.then(function(){},function(){})}}]),angular.module("static-factories").filter("locationFilter",[function(){return function(input,filter,isEnable){var allUnchecked=!0;if(angular.forEach(filter,function(filter){filter.value&&(allUnchecked=!1)}),!allUnchecked&&isEnable){var result=[];return angular.forEach(input,function(candidate){angular.forEach(filter,function(filter){filter.value&&filter.name===candidate.location&&result.push(candidate)})}),result}return input}}]),angular.module("static-factories").filter("salaryFilter",[function(){return function(input,filter,isEnable){var allUnchecked=!0;if(angular.forEach(filter,function(filter){filter.value&&(allUnchecked=!1)}),!allUnchecked&&isEnable){var result=[];return angular.forEach(input,function(candidate){angular.forEach(filter,function(filter){filter.value&&filter.name===candidate.salary_expectation&&result.push(candidate)})}),result}return input}}]),angular.module("static-factories").filter("visaFilter",[function(){return function(input,filter,isEnable){var allUnchecked=!0;if(angular.forEach(filter,function(filter){filter.value&&(allUnchecked=!1)}),!allUnchecked&&isEnable){var result=[];return angular.forEach(input,function(candidate){angular.forEach(filter,function(filter){filter.value&&filter.name===candidate.visa_status&&result.push(candidate)})}),result}return input}}]),angular.module("static-factories").filter("employeetypeFilter",[function(){return function(input,filter,isEnable){var allUnchecked=!0;if(angular.forEach(filter,function(filter){filter.value&&(allUnchecked=!1)}),!allUnchecked&&isEnable){var result=[];return angular.forEach(input,function(candidate){angular.forEach(filter,function(filter){filter.value&&filter.name===candidate.employee_type&&result.push(candidate)})}),result}return input}}]),angular.module("static-factories").filter("employeestatusFilter",[function(){return function(input,filter,isEnable){var allUnchecked=!0;if(angular.forEach(filter,function(filter){filter.value&&(allUnchecked=!1)}),!allUnchecked&&isEnable){var result=[];return angular.forEach(input,function(candidate){angular.forEach(filter,function(filter){filter.value&&filter.name===candidate.employee_status&&result.push(candidate)})}),result}return input}}]),angular.module("static-factories").factory("Countries",["$http",function($http){var factory={},cachedCountries=[];return factory.getCountries=function(callback){cachedCountries?$http.get("/countries").success(function(countries){cachedCountries=countries,callback(countries)}):callback(cachedCountries)},factory}]),angular.module("static-factories").factory("Industries",[function(){var factory={},industries=[{group:"corp fin",name:"Accounting"},{group:"man tech tran",name:"Airlines/Aviation"},{group:"leg org",name:"Alternative Dispute Resolution"},{group:"hlth",name:"Alternative Medicine"},{group:"art med",name:"Animation"},{group:"good",name:"Apparel & Fashion"},{group:"cons",name:"Architecture & Planning"},{group:"art med rec",name:"Arts and Crafts	"},{group:"man",name:"Automotive"},{group:"gov man",name:"Aviation & Aerospace"},{group:"fin",name:"Banking"},{group:"gov hlth tech",name:"Biotechnology"},{group:"med rec",name:"Broadcast Media"},{group:"cons",name:"Building Materials"},{group:"corp man",name:"Business Supplies and Equipment"},{group:"fin",name:"Capital Markets"},{group:"man",name:"Chemicals"},{group:"org serv",name:"Civic & Social Organization"},{group:"cons gov",name:"Civil Engineering"},{group:"cons corp fin",name:"Commercial Real Estate"},{group:"tech",name:"Computer & Network Security"},{group:"med rec",name:"Computer Games"},{group:"tech",name:"Computer Hardware"},{group:"tech",name:"Computer Networking"},{group:"tech",name:"Computer Software"},{group:"cons",name:"Construction"},{group:"good man",name:"Consumer Electronics"},{group:"good man",name:"Consumer Goods"},{group:"org serv",name:"Consumer Services"},{group:"good",name:"Cosmetics"},{group:"agr",name:"Dairy"},{group:"gov tech",name:"Defense & Space"},{group:"art med",name:"Design"},{group:"edu",name:"Education Management"},{group:"edu org",name:"E-Learning"},{group:"good man",name:"Electrical/Electronic Manufacturing"},{group:"med rec",name:"Entertainment"},{group:"org serv",name:"Environmental Services"},{group:"corp rec serv",name:"Events Services"},{group:"gov",name:"Executive Office"},{group:"corp serv",name:"Facilities Services"},{group:"agr",name:"Farming"},{group:"fin",name:"Financial Services"},{group:"art med rec",name:"Fine Art"},{group:"agr",name:"Fishery"},{group:"rec serv",name:"Food & Beverages"},{group:"good man serv",name:"Food Production"},{group:"org",name:"Fund-Raising"},{group:"good man",name:"Furniture"},{group:"rec",name:"Gambling & Casinos"},{group:"cons man",name:"Glass, Ceramics & Concrete"},{group:"gov",name:"Government Administration"},{group:"gov",name:"Government Relations"},{group:"art med",name:"Graphic Design"},{group:"hlth rec",name:"Health, Wellness and Fitness"},{group:"edu",name:"Higher Education"},{group:"hlth",name:"Hospital & Health Care"},{group:"rec serv tran",name:"Hospitality"},{group:"corp",name:"Human Resources"},{group:"corp good tran",name:"Import and Export"},{group:"org serv",name:"Individual & Family Services"},{group:"cons man",name:"Industrial Automation"},{group:"med serv",name:"Information Services"},{group:"tech",name:"Information Technology and Services"},{group:"fin",name:"Insurance"},{group:"gov",name:"International Affairs"},{group:"gov org tran",name:"International Trade and Development"},{group:"tech",name:"Internet"},{group:"fin",name:"Investment Banking"},{group:"fin",name:"Investment Management"},{group:"gov leg",name:"Judiciary"},{group:"gov leg",name:"Law Enforcement"},{group:"leg",name:"Law Practice"},{group:"leg",name:"Legal Services"},{group:"gov leg",name:"Legislative Office"},{group:"rec serv tran",name:"Leisure, Travel & Tourism"},{group:"med rec serv",name:"Libraries"},{group:"corp tran",name:"Logistics and Supply Chain"},{group:"good",name:"Luxury Goods & Jewelry"},{group:"man",name:"Machinery"},{group:"corp",name:"Management Consulting"},{group:"tran",name:"Maritime"},{group:"corp",name:"Market Research"},{group:"corp med",name:"Marketing and Advertising"},{group:"cons gov man",name:"Mechanical or Industrial Engineering"},{group:"med rec",name:"Media Production"},{group:"hlth",name:"Medical Devices"},{group:"hlth",name:"Medical Practice"},{group:"hlth",name:"Mental Health Care"},{group:"gov",name:"Military"},{group:"man",name:"Mining & Metals"},{group:"art med rec",name:"Motion Pictures and Film"},{group:"art med rec",name:"Museums and Institutions"},{group:"art rec",name:"Music"},{group:"gov man tech",name:"Nanotechnology"},{group:"med rec",name:"Newspapers"},{group:"org",name:"Non-Profit Organization Management"},{group:"man",name:"Oil & Energy"},{group:"med",name:"Online Media"},{group:"corp",name:"Outsourcing/Offshoring"},{group:"serv tran",name:"Package/Freight Delivery"},{group:"good man",name:"Packaging and Containers"},{group:"man",name:"Paper & Forest Products"},{group:"art med rec",name:"Performing Arts"},{group:"hlth tech",name:"Pharmaceuticals"},{group:"org",name:"Philanthropy"},{group:"art med rec",name:"Photography"},{group:"man",name:"Plastics"},{group:"gov org",name:"Political Organization"},{group:"edu",name:"Primary/Secondary Education"},{group:"med rec",name:"Printing"},{group:"corp",name:"Professional Training & Coaching"},{group:"corp org",name:"Program Development"},{group:"gov",name:"Public Policy"},{group:"corp",name:"Public Relations and Communications"},{group:"gov",name:"Public Safety"},{group:"med rec",name:"Publishing"},{group:"man",name:"Railroad Manufacture"},{group:"agr",name:"Ranching"},{group:"cons fin good",name:"Real Estate"},{group:"rec serv",name:"Recreational Facilities and Services"},{group:"org serv",name:"Religious Institutions"},{group:"gov man org",name:"Renewables & Environment"},{group:"edu gov",name:"Research"},{group:"rec serv",name:"Restaurants"},{group:"good man",name:"Retail"},{group:"corp org serv",name:"Security and Investigations"},{group:"tech",name:"Semiconductors"},{group:"man",name:"Shipbuilding"},{group:"good rec",name:"Sporting Goods"},{group:"rec",name:"Sports"},{group:"corp",name:"Staffing and Recruiting"},{group:"good",name:"Supermarkets"},{group:"gov tech",name:"Telecommunications"},{group:"man",name:"Textiles"},{group:"gov org",name:"Think Tanks"},{group:"good",name:"Tobacco"},{group:"corp gov serv",name:"Translation and Localization"},{group:"tran",name:"Transportation/Trucking/Railroad"},{group:"man",name:"Utilities"},{group:"fin tech",name:"Venture Capital & Private Equity"},{group:"hlth",name:"Veterinary"},{group:"tran",name:"Warehousing"},{group:"good",name:"Wholesale"},{group:"good man rec",name:"Wine and Spirits"},{group:"tech",name:"Wireless"},{group:"art med rec",name:"Writing and Editing"}];
return factory.getIndustries=function(){return industries},factory}]),angular.module("static-factories").factory("Locationz",[function(){var factory={},locationz=[{name:"Bagh"},{name:"Bhimber"},{name:"khuiratta"},{name:"Kotli"},{name:"Mangla"},{name:"Mirpur"},{name:"Muzaffarabad"},{name:"Plandri"},{name:"Rawalakot"},{name:"Punch"},{name:"Amir Chah"},{name:"Bazdar"},{name:"Bela"},{name:"Bellpat"},{name:"Bagh"},{name:"Burj"},{name:"Chah Sandan"},{name:"Chaman"},{name:"Chakku"},{name:"Chhatr"},{name:"Dalbandin"},{name:"Dera Bugti"},{name:"Dhana Sar"},{name:"Diwana"},{name:"Duki"},{name:"Dushi"},{name:"Duzab"},{name:"Gajar"},{name:"Gandava"},{name:"Garhi Khairo"},{name:"Garruck"},{name:"Ghazluna"},{name:"Girdan"},{name:"Gulistan"},{name:"Gwadar"},{name:"Gwash"},{name:"Hab Chauki"},{name:"Hameedabad"},{name:"Harnai"},{name:"Hinglaj"},{name:"Hoshab"},{name:"Ispikan"},{name:"Jhal"},{name:"Jhal Jhao"},{name:"Jhatpat"},{name:"Jiwani"},{name:"Kalandi"},{name:"Kalat"},{name:"Kamararod"},{name:"Kanak"},{name:"Kandi"},{name:"Kanpur"},{name:"Kapip"},{name:"Kappar"},{name:"Karodi"},{name:"Katuri"},{name:"Kharan"},{name:"Khuzdar"},{name:"Kikki"},{name:"Kohan"},{name:"Kohlu"},{name:"Korak"},{name:"Lahri"},{name:"Lasbela"},{name:"Liari"},{name:"Loralai"},{name:"Mach"},{name:"Mand"},{name:"Mangucha"},{name:"Mashki Chah"},{name:"Maslti"},{name:"Mastung"},{name:"Mekhtar"},{name:"Merui"},{name:"Mianez"},{name:"Murgha Kibzai"},{name:"Musa Khel Bazar"},{name:"Nagha Kalat"},{name:"Nal"},{name:"Naseerabad"},{name:"Nauroz Kalat"},{name:"Nur Gamma"},{name:"Nushki"},{name:"Nuttal"},{name:"Ormara"},{name:"Palantuk"},{name:"Panjgur"},{name:"Pasni"},{name:"Piharak"},{name:"Pishin"},{name:"Qamruddin Karez"},{name:"Qila Abdullah"},{name:"Qila Ladgasht"},{name:"Qila Safed"},{name:"Qila Saifullah"},{name:"Quetta"},{name:"Rakhni"},{name:"Robat Thana"},{name:"Rodkhan"},{name:"Saindak"},{name:"Sanjawi"},{name:"Saruna"},{name:"Shabaz Kalat"},{name:"Shahpur"},{name:"Sharam Jogizai"},{name:"Shingar"},{name:"Shorap"},{name:"Sibi"},{name:"Sonmiani"},{name:"Spezand"},{name:"Spintangi"},{name:"Sui"},{name:"Suntsar"},{name:"Surab"},{name:"Thalo"},{name:"Tump"},{name:"Turbat"},{name:"Umarao"},{name:"pirMahal"},{name:"Uthal"},{name:"Vitakri"},{name:"Wadh"},{name:"Washap"},{name:"Wasjuk"},{name:"Yakmach"},{name:"Zhob"},{name:"Astor"},{name:"Baramula"},{name:"Hunza"},{name:"Gilgit"},{name:"Nagar"},{name:"Skardu"},{name:"Shangrila"},{name:"Shandur"},{name:"Bajaur"},{name:"Hangu"},{name:"Malakand"},{name:"Miram Shah"},{name:"Mohmand"},{name:"Khyber"},{name:"Kurram"},{name:"North Waziristan"},{name:"South Waziristan"},{name:"Wana"},{name:"NWFP"},{name:"Abbottabad"},{name:"Ayubia"},{name:"Adezai"},{name:"Banda Daud Shah"},{name:"Bannu"},{name:"Batagram"},{name:"Birote"},{name:"Buner"},{name:"Chakdara"},{name:"Charsadda"},{name:"Chitral"},{name:"Dargai"},{name:"Darya Khan"},{name:"Dera Ismail Khan"},{name:"Drasan"},{name:"Drosh"},{name:"Hangu"},{name:"Haripur"},{name:"Kalam"},{name:"Karak"},{name:"Khanaspur"},{name:"Kohat"},{name:"Kohistan"},{name:"Lakki Marwat"},{name:"Latamber"},{name:"Lower Dir"},{name:"Madyan"},{name:"Malakand"},{name:"Mansehra"},{name:"Mardan"},{name:"Mastuj"},{name:"Mongora"},{name:"Nowshera"},{name:"Paharpur"},{name:"Peshawar"},{name:"Saidu Sharif"},{name:"Shangla"},{name:"Sakesar"},{name:"Swabi"},{name:"Swat"},{name:"Tangi"},{name:"Tank"},{name:"Thall"},{name:"Tordher"},{name:"Upper Dir"},{name:"Ahmedpur East"},{name:"Ahmed Nager Chatha"},{name:"Ali Pur"},{name:"Arifwala"},{name:"Attock"},{name:"Basti Malook"},{name:"Bhagalchur"},{name:"Bhalwal"},{name:"Bahawalnagar"},{name:"Bahawalpur"},{name:"Bhaipheru"},{name:"Bhakkar"},{name:"Burewala"},{name:"Chailianwala"},{name:"Chakwal"},{name:"Chichawatni"},{name:"Chiniot"},{name:"Chowk Azam"},{name:"Chowk Sarwar Shaheed"},{name:"Daska"},{name:"Darya Khan"},{name:"Dera Ghazi Khan"},{name:"Derawar Fort"},{name:"Dhaular"},{name:"Dina City"},{name:"Dinga"},{name:"Dipalpur"},{name:"Faisalabad"},{name:"Fateh Jang"},{name:"Gadar"},{name:"Ghakhar Mandi"},{name:"Gujranwala"},{name:"Gujrat"},{name:"Gujar Khan"},{name:"Hafizabad"},{name:"Haroonabad"},{name:"Hasilpur"},{name:"Haveli Lakha"},{name:"Jampur"},{name:"Jhang"},{name:"Jhelum"},{name:"Kalabagh"},{name:"Karor Lal Esan"},{name:"Kasur"},{name:"Kamalia"},{name:"Kamokey"},{name:"Khanewal"},{name:"Khanpur"},{name:"Kharian"},{name:"Khushab"},{name:"Kot Addu"},{name:"Jahania"},{name:"Jalla Araain"},{name:"Jauharabad"},{name:"Laar"},{name:"Lahore"},{name:"Lalamusa"},{name:"Layyah"},{name:"Lodhran"},{name:"Mamoori"},{name:"Mandi Bahauddin"},{name:"Makhdoom Aali"},{name:"Mandi Warburton"},{name:"Mailsi"},{name:"Mian Channu"},{name:"Minawala"},{name:"Mianwali"},{name:"Multan"},{name:"Murree"},{name:"Muridke"},{name:"Muzaffargarh"},{name:"Narowal"},{name:"Okara"},{name:"Renala Khurd"},{name:"Rajan Pur"},{name:"Pak Pattan"},{name:"Panjgur"},{name:"Pattoki"},{name:"Pirmahal"},{name:"Qila Didar Singh"},{name:"Rabwah"},{name:"Raiwind"},{name:"Rajan Pur"},{name:"Rahim Yar Khan"},{name:"Rawalpindi"},{name:"Rohri"},{name:"Sadiqabad"},{name:"Safdar Abad  (Dhaban Singh)"},{name:"Sahiwal"},{name:"Sangla Hill"},{name:"Samberial"},{name:"Sarai Alamgir"},{name:"Sargodha"},{name:"Shakargarh"},{name:"Shafqat Shaheed Chowk"},{name:"Sheikhupura"},{name:"Sialkot"},{name:"Sohawa"},{name:"Sooianwala"},{name:"Sundar (city)"},{name:"Talagang"},{name:"Tarbela"},{name:"Takhtbai"},{name:"Taxila"},{name:"Toba Tek Singh"},{name:"Vehari"},{name:"Wah Cantonment"},{name:"Wazirabad"},{name:"Ali Bandar"},{name:"Baden"},{name:"Chachro"},{name:"Dadu"},{name:"Digri"},{name:"Diplo"},{name:"Dokri"},{name:"Gadra"},{name:"Ghanian"},{name:"Ghauspur"},{name:"Ghotki"},{name:"Hala"},{name:"Hyderabad"},{name:"Islamkot"},{name:"Jacobabad"},{name:"Jamesabad"},{name:"Jamshoro"},{name:"Janghar"},{name:"Jati (Mughalbhin)"},{name:"Jhudo"},{name:"Jungshahi"},{name:"Kandiaro"},{name:"Karachi"},{name:"Kashmor"},{name:"Keti Bandar"},{name:"Khairpur"},{name:"Khora"},{name:"Klupro"},{name:"Khokhropur"},{name:"Korangi"},{name:"Kotri"},{name:"Kot Sarae"},{name:"Larkana"},{name:"Lund"},{name:"Mathi"},{name:"Matiari"},{name:"Mehar"},{name:"Mirpur Batoro"},{name:"Mirpur Khas"},{name:"Mirpur Sakro"},{name:"Mithi"},{name:"Mithani"},{name:"Moro"},{name:"Nagar Parkar"},{name:"Naushara"},{name:"Naudero"},{name:"Noushero Feroz"},{name:"Nawabshah"},{name:"Nazimabad"},{name:"Naokot"},{name:"Pendoo"},{name:"Pokran"},{name:"Qambar"},{name:"Qazi Ahmad"},{name:"Ranipur"},{name:"Ratodero"},{name:"Rohri"},{name:"Saidu Sharif"},{name:"Sakrand"},{name:"Sanghar"},{name:"Shadadkhot"},{name:"Shahbandar"},{name:"Shahdadpur"},{name:"Shahpur Chakar"},{name:"Shikarpur"},{name:"Sujawal"},{name:"Sukkur"},{name:"Tando Adam"},{name:"Tando Allahyar"},{name:"Tando Bago"},{name:"Tar Ahamd Rind"},{name:"Thatta"},{name:"Tujal"},{name:"Umarkot"},{name:"Veirwaro"},{name:"Warah"}];return factory.getLocationz=function(){return locationz},factory}]),angular.module("static-factories").factory("Studyfields",[function(){var factory={},studyfields=[{group:"bac",name:"Bachelor of Architecture"},{group:"bac",name:"Bachelor of Biomedical Science"},{group:"bac",name:"Bachelor of Business Administration"},{group:"bac",name:"Bachelor of Clinical Science"},{group:"bac",name:"Bachelor of Commerce"},{group:"bac",name:"Bachelor of Computer Information Systems"},{group:"bac",name:"Bachelor of Science in Construction Technology"},{group:"bac",name:"Bachelor of Criminal Justice"},{group:"bac",name:"Bachelor of Divinity"},{group:"bac",name:"Bachelor of Economics"},{group:"bac",name:"Bachelor of Education"},{group:"bac",name:"Bachelor of Engineering"},{group:"bac",name:"Bachelor of Fine Arts"},{group:"bac",name:"Bachelor of Information Systems"},{group:"bac",name:"Bachelor of Management"},{group:"bac",name:"Bachelor of Music"},{group:"bac",name:"Bachelor of Pharmacy"},{group:"bac",name:"Bachelor of Philosophy"},{group:"bac",name:"Bachelor of Social Work"},{group:"bac",name:"Bachelor of Accountancy"},{group:"bac",name:"Bachelor of Arts in American Studies"},{group:"bac",name:"Bachelor of Arts in American Indian Studies"},{group:"bac",name:"Bachelor of Arts in Applied Psychology"},{group:"bac",name:"Bachelor of Arts in Biology"},{group:"bac",name:"Bachelor of Arts in Anthropology"},{group:"bac",name:"Bachelor of Arts in Child Advocacy"},{group:"bac",name:"Bachelor of Arts in Clinical Psychology"},{group:"bac",name:"Bachelor of Arts in Forensic Psychology"},{group:"bac",name:"Bachelor of Arts in Organizational Psychology"},{group:"bac",name:"Bachelor of Science in Aerospace Engineering"},{group:"bac",name:"Bachelor of Science in Actuarial"},{group:"bac",name:"Bachelor of Science in Agriculture"},{group:"bac",name:"Bachelor of Science in Architecture"},{group:"bac",name:"Bachelor of Science in Architectural Engineering"},{group:"bac",name:"Bachelor of Science in Biology"},{group:"bac",name:"Bachelor of Science in Biomedical Engineering"},{group:"bac",name:"Bachelor of Science in Business Administration"},{group:"bac",name:"Bachelor of Science in Chemical Engineering"},{group:"bac",name:"Bachelor of Science in Chemistry"},{group:"bac",name:"Bachelor of Science in Civil Engineering"},{group:"bac",name:"Bachelor of Science in Clinical Laboratory Science"},{group:"bac",name:"Bachelor of Science in Cognitive Science"},{group:"bac",name:"Bachelor of Science in Computer Engineering"},{group:"bac",name:"Bachelor of Science in Computer Science"},{group:"bac",name:"Bachelor of Science in Construction Engineering"},{group:"bac",name:"Bachelor of Science in Construction Management"},{group:"bac",name:"Bachelor of Science in Criminal Justice"},{group:"bac",name:"Bachelor of Science in Criminology"},{group:"bac",name:"Bachelor of Science in Diagnostic Radiography"},{group:"bac",name:"Bachelor of Science in Education"},{group:"bac",name:"Bachelor of Science in Electrical Engineering"},{group:"bac",name:"Bachelor of Science in Engineering Physics"},{group:"bac",name:"Bachelor of Science in Engineering Science"},{group:"bac",name:"Bachelor of Science in Engineering Technology"},{group:"bac",name:"Bachelor of Science in English Literature"},{group:"bac",name:"Bachelor of Science in Environmental Engineering"},{group:"bac",name:"Bachelor of Science in Environmental Science"},{group:"bac",name:"Bachelor of Science in Environmental Studies"},{group:"bac",name:"Bachelor of Science in Food Science"},{group:"bac",name:"Bachelor of Science in Foreign Service"},{group:"bac",name:"Bachelor of Science in Forensic Science"},{group:"bac",name:"Bachelor of Science in Forestry"},{group:"bac",name:"Bachelor of Science in History"},{group:"bac",name:"Bachelor of Science in Hospitality Management"},{group:"bac",name:"Bachelor of Science in Human Resources Management"},{group:"bac",name:"Bachelor of Science in Industrial Engineering"},{group:"bac",name:"Bachelor of Science in Information Technology"},{group:"bac",name:"Bachelor of Science in Information Systems"},{group:"bac",name:"Bachelor of Science in Integrated Science, Business and Technology"},{group:"bac",name:"Bachelor of Science in International Relations"},{group:"bac",name:"Bachelor of Science in Journalism"},{group:"bac",name:"Bachelor of Science in Management"},{group:"bac",name:"Bachelor of Science in Manufacturing Engineering"},{group:"bac",name:"Bachelor of Science in Marketing"},{group:"bac",name:"Bachelor of Science in Mathematics"},{group:"bac",name:"Bachelor of Science in Mechanical Engineering"},{group:"bac",name:"Bachelor of Science in Medical Technology"},{group:"bac",name:"Bachelor of Science in Meteorology"},{group:"bac",name:"Bachelor of Science in Microbiology"},{group:"bac",name:"Bachelor of Science in Mining Engineering"},{group:"bac",name:"Bachelor of Science in Molecular Biology"},{group:"bac",name:"Bachelor of Science in Neuroscience"},{group:"bac",name:"Bachelor of Science in Nursing"},{group:"bac",name:"Bachelor of Science in Nutrition science"},{group:"bac",name:"Bachelor of Science in Software Engineering"},{group:"bac",name:"Bachelor of Science in Petroleum Engineering"},{group:"bac",name:"Bachelor of Science in Podiatry"},{group:"bac",name:"Bachelor of Science in Pharmacology"},{group:"bac",name:"Bachelor of Science in Pharmacy"},{group:"bac",name:"Bachelor of Science in Physical Therapy"},{group:"bac",name:"Bachelor of Science in Physics"},{group:"bac",name:"Bachelor of Science in Plant Science"},{group:"bac",name:"Bachelor of Science in Politics"},{group:"bac",name:"Bachelor of Science in Psychology"},{group:"bac",name:"Bachelor of Science in Quantity Surveying Engineering"},{group:"bac",name:"Bachelor of Science in Radiologic Technology"},{group:"bac",name:"Bachelor of Science in Real-Time Interactive Simulation"},{group:"bac",name:"Bachelor of Science in Religion"},{group:"bac",name:"Bachelor of Science in Respiratory Therapy"},{group:"bac",name:"Bachelor of Science in Risk Management and Insurance"},{group:"bac",name:"Bachelor of Science in Science Education"},{group:"bac",name:"Bachelor of Science in Systems Engineering"},{group:"bac",name:"Bachelor of Music in Jazz Studies"},{group:"bac",name:"Bachelor of Music in Composition"},{group:"bac",name:"Bachelor of Music in Performance"},{group:"bac",name:"Bachelor of Music in Theory"},{group:"bac",name:"Bachelor of Music in Music Education"},{group:"bac",name:"Bachelor of Sports Management"},{group:"mas",name:"Master by Research"},{group:"mas",name:"Master of Accountancy"},{group:"mas",name:"Master of Advanced Study"},{group:"mas",name:"Master of Applied Mathematical Sciences"},{group:"mas",name:"Master of Applied Science"},{group:"mas",name:"Master of Architecture"},{group:"mas",name:"Master of Arts"},{group:"mas",name:"Master of Arts in Liberal Studies"},{group:"mas",name:"Master of Arts in Strategic Communication Management"},{group:"mas",name:"Master of Arts in Teaching"},{group:"mas",name:"Master of Bioinformatics"},{group:"mas",name:"Master of Business Administration"},{group:"mas",name:"Master of Business"},{group:"mas",name:"Master of Business Economics"},{group:"mas",name:"Master of Business Engineering"},{group:"mas",name:"Master of Business Informatics"},{group:"mas",name:"Master of Chemistry"},{group:"mas",name:"Master of City Planning"},{group:"mas",name:"Master of Commerce"},{group:"mas",name:"Master of Computational Finance"},{group:"mas",name:"Master of Computer Applications"},{group:"mas",name:"Master of Computer Science"},{group:"mas",name:"Master of Communication"},{group:"mas",name:"Master of Counselling"},{group:"mas",name:"Master of Criminal Justice"},{group:"mas",name:"Master in Creative Technologies"},{group:"mas",name:"Master of Design"},{group:"mas",name:"Master of Divinity"},{group:"mas",name:"Master of Economics"},{group:"mas",name:"Master of Education"},{group:"mas",name:"Master of Educational Technology"},{group:"mas",name:"Master of Engineering"},{group:"mas",name:"Master of Engineering Management"},{group:"mas",name:"Master of Enterprise"},{group:"mas",name:"Master of European Law"},{group:"mas",name:"Master of Finance"},{group:"mas",name:"Master of Financial Economics"},{group:"mas",name:"Master of Financial Engineering"},{group:"mas",name:"Master of Financial Mathematics"},{group:"mas",name:"Master of Fine Arts"},{group:"mas",name:"Master of Health Administration"},{group:"mas",name:"Master of Health Science"},{group:"mas",name:"Master of Humanities"},{group:"mas",name:"Master of Industrial and Labor Relations"},{group:"mas",name:"Master of International Affairs"},{group:"mas",name:"Master of International Business"},{group:"mas",name:"Masters in International Economics"},{group:"mas",name:"Master of International Public Policy"},{group:"mas",name:"Master of International Studies"},{group:"mas",name:"Master of Information"},{group:"mas",name:"Master of Information Management"},{group:"mas",name:"Master of Information System Management"},{group:"mas",name:"Master of Islamic Studies"},{group:"mas",name:"Master of IT"},{group:"mas",name:"Master of Jurisprudence"},{group:"mas",name:"Master of Laws"},{group:"mas",name:"Master of Studies in Law"},{group:"mas",name:"Master of Landscape Architecture"},{group:"mas",name:"Master of Letters"},{group:"mas",name:"Master of Liberal Arts"},{group:"mas",name:"Master of Library and Information Science"},{group:"mas",name:"Master of Management"},{group:"mas",name:"Master of Mass Communication and Journalism"},{group:"mas",name:"Master of Mathematical Finance"},{group:"mas",name:"Master of Mathematics"},{group:"mas",name:"Master of Mathematics and Computer Science"},{group:"mas",name:"Master of Mathematics and Philosophy"},{group:"mas",name:"Master of Medical Science"},{group:"mas",name:"Master of Medicine"},{group:"mas",name:"Masters of Military Art and Science"},{group:"mas",name:"Master of Music"},{group:"mas",name:"Master of Network and Communications Management"},{group:"mas",name:"Master of Occupational Therapy"},{group:"mas",name:"Master of Pharmacy"},{group:"mas",name:"Master of Philosophy"},{group:"mas",name:"Master of Physician Assistant Studies"},{group:"mas",name:"Master of Physics"},{group:"mas",name:"Master of Political Science"},{group:"mas",name:"Master of Professional Studies"},{group:"mas",name:"Master of Public Administration"},{group:"mas",name:"Master of Public Affairs"},{group:"mas",name:"Master of Public Diplomacy"},{group:"mas",name:"Master of Public Health"},{group:"mas",name:"Master of Public Management"},{group:"mas",name:"Master of Public Policy"},{group:"mas",name:"Master of Public Relations"},{group:"mas",name:"Master of Public Service"},{group:"mas",name:"Master of Quantitative Finance"},{group:"mas",name:"Master of Rabbinic Studies"},{group:"mas",name:"Master of Real Estate Development"},{group:"mas",name:"Master of Religious Education"},{group:"mas",name:"Master of Research"},{group:"mas",name:"Master of Sacred Music"},{group:"mas",name:"Master of Sacred Theology"},{group:"mas",name:"Master of Science"},{group:"mas",name:"Master of Science in Applied Cognition and Neuroscience"},{group:"mas",name:"Master of Science in Bioinformatics"},{group:"mas",name:"Master of Science in Clinical Epidemiology"},{group:"mas",name:"Master of Science in Computing Research"},{group:"mas",name:"Master of Science in Cyber Security"},{group:"mas",name:"Master of Science in Education"},{group:"mas",name:"Master of Science in Engineering"},{group:"mas",name:"Master of Science in Development Administration"},{group:"mas",name:"Master of Science in Finance"},{group:"mas",name:"Master of Science in Governance & Organizational Sciences"},{group:"mas",name:"Master of Science in Government Contracts"},{group:"mas",name:"Master of Science in Health Informatics"},{group:"mas",name:"Master of Science in Human Resource Development"},{group:"mas",name:"Master of Science in Information Assurance"},{group:"mas",name:"Master of Science in Information Systems"},{group:"mas",name:"Master of Science in Information Technology"},{group:"mas",name:"Master of Science in Leadership"},{group:"mas",name:"Master of Science in Management"},{group:"mas",name:"Master of Science in Nursing"},{group:"mas",name:"Master of Science in Project Management"},{group:"mas",name:"Master of Science in Quality Assurance"},{group:"mas",name:"Master of Science in Risk Management"},{group:"mas",name:"Master of Science in Supply Chain Management"},{group:"mas",name:"Master of Science in Teaching"},{group:"mas",name:"Master of Science in Taxation"},{group:"mas",name:"Master of Social Science"},{group:"mas",name:"Master of Social Work"},{group:"mas",name:"Master of Statistics"},{group:"mas",name:"Master of Studies"},{group:"mas",name:"Master of Surgery"},{group:"mas",name:"Master of Theological Studies"},{group:"mas",name:"Master of Technology"},{group:"mas",name:"Master of Theology"},{group:"mas",name:"Master of Urban Planning"},{group:"mas",name:"Master of Veterinary Science"},{group:"doc",name:"Doctor of Business Administration"},{group:"doc",name:"Doctor of Canon Law"},{group:"doc",name:"Doctor of Chiropractic"},{group:"doc",name:"Doctor of Commerce"},{group:"doc",name:"Doctor of Dental Surgery"},{group:"doc",name:"Doctor of Divinity"},{group:"doc",name:"Doctor of Education"},{group:"doc",name:"Doctor of Engineering"},{group:"doc",name:"Doctor of Health Administration"},{group:"doc",name:"Doctor of Health Science"},{group:"doc",name:"Doctor of Juridical Science"},{group:"doc",name:"Doctor of Law"},{group:"doc",name:"Doctor of Liberal Studies"},{group:"doc",name:"Doctor of Management"},{group:"doc",name:"Doctor of Medicine"},{group:"doc",name:"Doctor of Ministry"},{group:"doc",name:"Doctor of Musical Arts"},{group:"doc",name:"Doctor of Naturopathic Medicine"},{group:"doc",name:"Doctor of Optometry"},{group:"doc",name:"Doctor of Osteopathic Medicine"},{group:"doc",name:"Doctor of Pharmacy"},{group:"doc",name:"Doctor of Philosophy"},{group:"doc",name:"Doctor of Public Administration"},{group:"doc",name:"Doctor of Science"},{group:"doc",name:"Doctor of Theology"},{group:"doc",name:"Doctor of Veterinary Medicine"}];return factory.getStudyFields=function(){return studyfields},factory}]),angular.module("threads").config(["$stateProvider",function($stateProvider){$stateProvider.state("listThreads",{url:"/threads",templateUrl:"modules/threads/views/list-threads.client.view.html"}).state("createThread",{url:"/threads/create",templateUrl:"modules/threads/views/create-thread.client.view.html"}).state("viewThread",{url:"/threads/:threadId",templateUrl:"modules/threads/views/view-thread.client.view.html"}).state("editThread",{url:"/threads/:threadId/edit",templateUrl:"modules/threads/views/edit-thread.client.view.html"})}]),angular.module("threads").controller("ThreadsController",["$scope","$stateParams","$location","Authentication","Threads","$http","Socket","$rootScope",function($scope,$stateParams,$location,Authentication,Threads,$http,Socket){$scope.authentication=Authentication,$scope.color="color:green",$scope.color2="color:red",Socket.on("i_am_here",function(data){for(var x=0,b=$scope.thread.messages.length;b>x;x++)$scope.thread.messages[x].author._id===data.userId&&($scope.thread.messages[x].author.isOnline="Online"==data.isOnline?!0:!1),$scope.thread.messages[x].author.authorid==data.userId&&($scope.thread.messages[x].author.isOnline="Online"==data.isOnline?!0:!1)}),Socket.on("incoming_thread",function(data){$http.put("/threads/getUserThread/"+$stateParams.threadId,{id:$scope.authentication.user._id}).success(function(){Socket.emit("watched_thread",$scope.authentication.user._id)}),$scope.thread.messages.push({messageBody:data.messageBody,author:{authorid:data.id,displayName:data.author,picture_url:data.authordp,isOnline:"Online"},created:data.created})}),$scope.showOnline=function(data){return"Online"==data.author.isOnline?!0:!1},$scope.showOffline=function(data){return"Online"==data.author.isOnline?!1:!0},$scope.create=function(){var thread=new Threads({name:this.name});thread.$save(function(response){$location.path("threads/"+response._id)},function(errorResponse){$scope.error=errorResponse.data.message}),this.name=""},$scope.remove=function(thread){if(thread){thread.$remove();for(var i in $scope.threads)$scope.threads[i]===thread&&$scope.threads.splice(i,1)}else $scope.thread.$remove(function(){$location.path("threads")})},$scope.sendMessage=function(){var threadId=$scope.thread._id;console.log("{Thread} {SendMessage} running THREAD ID"+threadId);var message={threadId:$scope.thread._id,messageBody:$scope.messageBody,author:$scope.authentication.user};if(console.log("USER ID:"+$scope.authentication.user._id+" Sender ID"+$scope.thread.sender+" Receiver ID:"+$scope.thread.receiver),$scope.authentication.user._id==$scope.thread.sender._id){var thread={idc:threadId,sender:{displayName:$scope.authentication.user.displayName},receiver:$scope.thread.receiver._id,messages:{created:Date.now()}};Socket.emit("message_sent_from",{message:thread})}else{var thread={idc:threadId,sender:{displayName:$scope.authentication.user.displayName},receiver:$scope.thread.sender._id,messages:[{created:Date.now()}]};Socket.emit("message_sent_from",{message:thread})}$http.put("/threads/updateThread/"+$scope.thread._id,message).success(function(messageBody){Socket.emit("update_threads",{sender:messageBody.sender,receiver:messageBody.receiver,threadId:$scope.thread._id,messageBody:$scope.messageBody,author:$scope.authentication.user,authordp:$scope.authentication.user.picture_url,created:Date.now()}),$scope.messageBody=""})},$scope.update=function(){var thread=$scope.thread;thread.$update(function(){$location.path("threads/"+thread._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.threads=Threads.query()},$scope.findUserThreads=function(){console.log("FINDUSERTHREADS RAN"),$http.get("/threads/getUserThreads/"+$scope.authentication.user._id).success(function(threads){$scope.threads=threads})},$scope.findOne=function(){$scope.thread=Threads.get({threadId:$stateParams.threadId}),Socket.emit("watched_thread","iraq")},$scope.findOneAndMarkAsRead=function(){$http.put("/threads/getUserThread/"+$stateParams.threadId,{id:$scope.authentication.user._id}).success(function(thread){$scope.thread=thread,console.log(thread.sender._id),thread.sender._id===$scope.authentication.user._id?$http.put("/users/addSubscriber/"+$scope.authentication.user._id,{id:thread.receiver._id}).success(function(){}):$http.put("/users/addSubscriber/"+$scope.authentication.user._id,{id:thread.sender._id}).success(function(){}),Socket.emit("watched_thread",$scope.authentication.user._id)})},$scope.cancelCompose=function(){$scope.isCompose=!1},$scope.startCompose=function(){$scope.isCompose=!0},$scope.checkAll=function(){for(var i=0;i<$scope.threads.length;i++)$scope.threads[i].selected=$scope.allChecked},$scope.changeCheckAll=function(){for(var i=0;i<$scope.threads.length;i++)if(!$scope.threads[i].selected)return $scope.allChecked=!1,!1;$scope.allChecked=!0}}]),angular.module("threads").factory("Threads",["$resource",function($resource){return $resource("threads/:threadId",{threadId:"@_id"},{update:{method:"PUT"}})}]),angular.module("users").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$q","$location","Authentication",function($q,$location,Authentication){return{responseError:function(rejection){switch(rejection.status){case 401:Authentication.user=null,$location.path("signin");break;case 403:}return $q.reject(rejection)}}}])}]),angular.module("users").config(["$stateProvider",function($stateProvider){$stateProvider.state("profile",{url:"/settings/profile",templateUrl:"modules/users/views/settings/edit-profile.client.view.html"}).state("password",{url:"/settings/password",templateUrl:"modules/users/views/settings/change-password.client.view.html"}).state("accounts",{url:"/settings/accounts",templateUrl:"modules/users/views/settings/social-accounts.client.view.html"}).state("signup",{url:"/signup",templateUrl:"modules/users/views/signup.client.view.html"}).state("signin",{url:"/signin",templateUrl:"modules/users/views/signin.client.view.html"}).state("forgot",{url:"/password/forgot",templateUrl:"modules/users/views/password/forgot-password.client.view.html"}).state("reset-invlaid",{url:"/password/reset/invalid",templateUrl:"modules/users/views/password/reset-password-invalid.client.view.html"}).state("reset-success",{url:"/password/reset/success",templateUrl:"modules/users/views/password/reset-password-success.client.view.html"}).state("reset",{url:"/password/reset/:token",templateUrl:"modules/users/views/password/reset-password.client.view.html"})}]),angular.module("users").controller("AuthenticationController",["$scope","$http","$location","Authentication","$state",function($scope,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.signup=function(){$http.post("/auth/signup",$scope.credentials).success(function(response){$scope.authentication.user=response,console.log($scope.authentication.user),$location.path("/")}).error(function(response){$scope.error=response.message})};var changeLocation=function(url,forceReload){$scope=$scope||angular.element(document).scope(),forceReload||$scope.$$phase?window.location=url:($location.path(url),$scope.$apply())};$scope.signin=function(){console.log("SIGNINGWTF"+$scope.credentials),$http.post("/auth/signin",$scope.credentials).success(function(response){$scope.authentication.user=response,console.log(response),changeLocation("/")}).error(function(response){console.log(response.message),$scope.error=response.message})}}]),angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","Authentication",function($scope,$stateParams,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.askForPasswordReset=function(){$scope.success=$scope.error=null,$http.post("/auth/forgot",$scope.credentials).success(function(response){$scope.credentials=null,$scope.success=response.message}).error(function(response){$scope.credentials=null,$scope.error=response.message})},$scope.resetUserPassword=function(){$scope.success=$scope.error=null,$http.post("/auth/reset/"+$stateParams.token,$scope.passwordDetails).success(function(response){$scope.passwordDetails=null,Authentication.user=response,$location.path("/password/reset/success")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("SettingsController",["$scope","$http","$location","Users","Authentication",function($scope,$http,$location,Users,Authentication){$scope.user=Authentication.user,$scope.user||$location.path("/"),$scope.hasConnectedAdditionalSocialAccounts=function(){for(var i in $scope.user.additionalProvidersData)return!0;return!1},$scope.isConnectedSocialAccount=function(provider){return $scope.user.provider===provider||$scope.user.additionalProvidersData&&$scope.user.additionalProvidersData[provider]},$scope.removeUserSocialAccount=function(provider){$scope.success=$scope.error=null,$http["delete"]("/users/accounts",{params:{provider:provider}}).success(function(response){$scope.success=!0,$scope.user=Authentication.user=response}).error(function(response){$scope.error=response.message})},$scope.updateUserProfile=function(){$scope.success=$scope.error=null;var user=new Users($scope.user);user.$update(function(response){$scope.success=!0,Authentication.user=response},function(response){$scope.error=response.data.message})},$scope.changeUserPassword=function(){$scope.success=$scope.error=null,$http.post("/users/password",$scope.passwordDetails).success(function(){$scope.success=!0,$scope.passwordDetails=null}).error(function(response){$scope.error=response.message})}}]),angular.module("users").factory("Authentication",[function(){var _this=this;return _this._data={user:window.user},_this._data}]),angular.module("users").factory("Users",["$resource",function($resource){return $resource("users",{},{update:{method:"PUT"}})}]);